"use client";

import React, { useEffect, useState, useRef } from 'react';
import { ADMIN_HEADING_STYLES, ADMIN_FONT_STYLES, ADMIN_UI, ADMIN_CARD_STYLES, ADMIN_BUTTON_SIZES, ADMIN_INPUT_STYLES } from '@/lib/admin-ui-constants';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Button } from '@/components/ui/button';
import { CompanyInfo, Logo3DSettings, CoreValueItem, AwardItem } from '@/types/company';
import { toast } from 'sonner';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Label } from '@/components/ui/label';
import { Separator } from '@/components/ui/separator';
import { FileUpload } from '@/components/admin/FileUpload';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Switch } from "@/components/ui/switch";
import { Slider } from "@/components/ui/slider";
import {
    ImageIcon, Info, MessageSquareText, Sparkles, Building, Users, Phone, Mail, LinkIcon, MapPin, Clock, Globe, Edit3, AlignLeft,
    RotateCcw, Save, TrendingUp, ImagePlus, Wallpaper, Eye, EyeOff, Palette, Cog, Rotate3d, Target, Brain, BriefcaseBusiness,
    ScrollText, Award, Gem, PlusCircle, Trash2, GripVertical, ExternalLink,
    CheckCheck, Lightbulb, Handshake, Scale, Recycle, // coreValues ì•„ì´ì½˜ë“¤
    CheckCircle, // ì¶”ê°€
    FlaskConical, // ì¶”ê°€
    ShieldCheck // ì¶”ê°€
} from 'lucide-react';
import type { LucideProps } from 'lucide-react'; // Import LucideProps
import { format } from 'date-fns';
import { cn } from '@/lib/utils';
import { v4 as uuidv4 } from 'uuid';
import Image from 'next/image';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"; // Select ì»´í¬ë„ŒíŠ¸ ì„í¬íŠ¸
import Logo3D from '@/components/ui/3D/Logo3D'; // Logo3D ì»´í¬ë„ŒíŠ¸ ì„í¬íŠ¸
import HistoryTimeline from '@/components/admin/HistoryTimeline'; // Import HistoryTimeline component
import { Download } from 'lucide-react'; // Import Download icon

// Lucide ì•„ì´ì½˜ ì´ë¦„ê³¼ ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§¤í•‘í•˜ëŠ” ê°ì²´ (íŒŒì¼ ìµœìƒë‹¨ìœ¼ë¡œ ì´ë™)
const LucideIcons: { [key: string]: React.FC<LucideProps> } = { // Update type here
    Award,
    Building,
    CheckCircle, // ìˆ˜ì •: CheckCircle ì„í¬íŠ¸ í›„, CheckCircle, í˜•íƒœë¡œ ì‚¬ìš©
    Cpu: Cog, // Cpu ì•„ì´ì½˜ì´ ì—†ìœ¼ë¯€ë¡œ Cogë¡œ ëŒ€ì²´ (ë˜ëŠ” ë‹¤ë¥¸ ì ì ˆí•œ ì•„ì´ì½˜)
    FlaskConical, // ìˆ˜ì •: FlaskConical ì„í¬íŠ¸ í›„, FlaskConical, í˜•íƒœë¡œ ì‚¬ìš©
    Lightbulb,
    Recycle,
    ShieldCheck, // ìˆ˜ì •: ShieldCheck ì„í¬íŠ¸ í›„, ShieldCheck, í˜•íƒœë¡œ ì‚¬ìš© (ë˜ëŠ” ShieldCheck: ShieldCheck)
    Users,
    Zap: Sparkles, // Zap ì•„ì´ì½˜ì´ ì—†ìœ¼ë¯€ë¡œ Sparklesë¡œ ëŒ€ì²´
    Target,
    Gem,
    Handshake,
    TrendingUp,
    Landmark: Building, // Landmark ì•„ì´ì½˜ì´ ì—†ìœ¼ë¯€ë¡œ Buildingìœ¼ë¡œ ëŒ€ì²´
    History: ScrollText, // History ì•„ì´ì½˜ì´ ì—†ìœ¼ë¯€ë¡œ ScrollTextë¡œ ëŒ€ì²´
    Sparkles,
    ImageIcon,
    MessageSquareText,
    Info,
    Phone,
    Mail,
    LinkIcon,
    MapPin,
    Clock,
    Globe,
    Edit3,
    AlignLeft,
    RotateCcw,
    Save,
    ImagePlus,
    Wallpaper,
    Eye,
    EyeOff,
    Palette,
    Cog,
    Rotate3d,
    Brain,
    BriefcaseBusiness,
    ScrollText,
    PlusCircle,
    Trash2,
    GripVertical,
    ExternalLink,
    CheckCheck,
    Scale,
};

const defaultLogo3DSettings: Logo3DSettings = {
    enableRotation: true,
    rotationSpeed: 0.0015,
    stylePreset: 'default',
    modelScale: 1,
    glbFileUrl: '',
    viewerBackgroundType: 'transparent', // ê¸°ë³¸ê°’: íˆ¬ëª…
    viewerBackgroundColor: '#FFFFFF', // ê¸°ë³¸ ë°°ê²½ìƒ‰ (íƒ€ì…ì´ 'color'ì¼ ë•Œ ì‚¬ìš©)
    viewerBackgroundHdriPath: '/hdri/studio_small_03_1k.hdr', // ê¸°ë³¸ HDRI ê²½ë¡œ (íƒ€ì…ì´ 'hdri'ì¼ ë•Œ ì‚¬ìš©)
};

const defaultData: CompanyInfo = {
    id: 'default',
    nameKo: '',
    nameEn: '',
    addressKo: '',
    addressEn: '',
    phone: '',
    fax: '',
    email: '',
    supportEmail: '',
    businessHours: '',
    CEO: '',
    businessNumber: '',
    established: '',
    description: '',
    intro: '',
    philosophy: '',
    aboutPageMainTitleFormat: '{nameKo} íšŒì‚¬ì†Œê°œ',
    aboutPageSectionTitleFormat: 'ì•ˆì „ ê¸°ìˆ ì˜ ë¯¸ë˜, <br className="hidden sm:block" /> {nameKo}ê°€ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.',
    aboutPageMainTitleClassName: 'text-4xl sm:text-5xl lg:text-6xl font-extrabold text-center mb-6 leading-tight tracking-tight text-primary-500', // í‚¤ì»¬ëŸ¬(primary-500)ë¡œ ë³€ê²½
    logoUrl: '',
    aboutPageVisualUrl: '',
    aboutPageHeroImageUrl: '',
    showAboutIntroSection: true,
    logo3dSettings: { ...defaultLogo3DSettings },
    socialLinks: { facebook: '', instagram: '', youtube: '', blog: '', linkedin: '' },
    philosophyStatement: '',
    coreValues: [
        { id: 'safety', icon: 'CheckCheck', mainTitle: 'ì•ˆì „ ì œì¼', subTitle: 'ëª¨ë“  í™œë™ì˜ ìµœìš°ì„  ê°€ì¹˜ëŠ” ì‚¬ëŒì˜ ì•ˆì „ì…ë‹ˆë‹¤.', description: 'ì•ˆì „ ê·œì • ë° í‘œì¤€ ì¤€ìˆ˜\nì² ì €í•œ ìœ„í—˜ì„± í‰ê°€ ë° ì˜ˆë°©\nì•ˆì „ ì˜ì‹ ë‚´ì¬í™”ë¥¼ ìœ„í•œ êµìœ¡ ê°•í™”\nì•ˆì „í•œ ì‘ì—… í™˜ê²½ ì¡°ì„±' },
        { id: 'innovation', icon: 'Lightbulb', mainTitle: 'ê¸°ìˆ  í˜ì‹ ', subTitle: 'ëŠì„ì—†ëŠ” ì—°êµ¬ê°œë°œë¡œ ì•ˆì „ ê¸°ìˆ ì˜ ë¯¸ë˜ë¥¼ ì„ ë„í•©ë‹ˆë‹¤.', description: 'ì§€ì†ì ì¸ R&D íˆ¬ì í™•ëŒ€\nì°¨ì„¸ëŒ€ ì•ˆì „ ê¸°ìˆ  ë° ì‹ ì†Œì¬ ê°œë°œ\nì°½ì˜ì ì¸ ì•„ì´ë””ì–´ ë°œêµ´ ë° ì‚¬ì—…í™”\në³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ë„ì „ ì •ì‹ ' },
        { id: 'customer', icon: 'Handshake', mainTitle: 'ê³ ê° ì¤‘ì‹¬', subTitle: 'ê³ ê°ì˜ ì‹ ë¢°ì™€ ë§Œì¡±ì„ ìµœê³ ì˜ ê°€ì¹˜ë¡œ ìƒê°í•©ë‹ˆë‹¤.', description: 'ê³ ê°ì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ëŠ” ì†Œí†µ\nê³ ê°ì˜ ê¸°ëŒ€ë¥¼ ë›°ì–´ë„˜ëŠ” ì œí’ˆê³¼ ì„œë¹„ìŠ¤\nì‹ ì†í•˜ê³  ì •í™•í•œ ê¸°ìˆ  ì§€ì›\nê³ ê°ê³¼ì˜ ì¥ê¸°ì ì¸ íŒŒíŠ¸ë„ˆì‹­ êµ¬ì¶•' },
        { id: 'integrity', icon: 'Scale', mainTitle: 'ì •ì§ê³¼ ì‹ ë¢°', subTitle: 'íˆ¬ëª…í•˜ê³  ìœ¤ë¦¬ì ì¸ ê²½ì˜ìœ¼ë¡œ ì‚¬íšŒì  ì±…ì„ì„ ë‹¤í•©ë‹ˆë‹¤.', description: 'ë²•ê·œ ë° ìœ¤ë¦¬ ê·œë²” ì¤€ìˆ˜\nê³µì •í•˜ê³  íˆ¬ëª…í•œ ì—…ë¬´ ì²˜ë¦¬\nì •ì§í•œ ê¸°ì—… ë¬¸í™” ì¡°ì„±\nì´í•´ê´€ê³„ìì™€ì˜ ì‹ ë¢° ê´€ê³„ êµ¬ì¶•' },
        { id: 'sustainability', icon: 'Recycle', mainTitle: 'ì§€ì†ê°€ëŠ¥ê²½ì˜', subTitle: 'í™˜ê²½ê³¼ ì‚¬íšŒë¥¼ ìƒê°í•˜ë©° ë¯¸ë˜ ì„¸ëŒ€ë¥¼ ìœ„í•œ ê°€ì¹˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.', description: 'ì¹œí™˜ê²½ ì œí’ˆ ê°œë°œ ë° ìƒì‚° í™•ëŒ€\nì—ë„ˆì§€ íš¨ìœ¨ ê°œì„  ë° íƒ„ì†Œ ë°°ì¶œ ê°ì¶•\nìì› ì¬í™œìš© ë° íê¸°ë¬¼ ê´€ë¦¬ ê°•í™”\nì§€ì—­ì‚¬íšŒ ê³µí—Œ ë° ìƒìƒ í˜‘ë ¥' },
    ],
    businessType: `ì†Œë°©ì•ˆì „ ì¥ë¹„
ê³µê¸°ì•ˆì „ë§¤íŠ¸, ì™„ê°•ê¸°, êµ¬ì¡°ëŒ€ ë“± ë‹¤ì–‘í•œ ì†Œë°©ì•ˆì „ ì¥ë¹„ ê°œë°œ ë° ìƒì‚°
- ê³µê¸°ì•ˆì „ë§¤íŠ¸
    - ì™„ê°•ê¸° ë° ê°„ì´ì™„ê°•ê¸°
- ì¸ëª…êµ¬ì¡°ëŒ€
    - ì†Œí™”ê¸° ë° ì†Œí™”ì¥ì¹˜

ì‚°ì—…ì•ˆì „ ì†”ë£¨ì…˜
ì‚°ì—… í˜„ì¥ì˜ ì•ˆì „ì„ ìœ„í•œ ë‹¤ì–‘í•œ ì†”ë£¨ì…˜ ì œê³µ
    - ì‚°ì—…ìš© ì•ˆì „ ì¥ë¹„
        - ì•ˆì „ ë°©ì¬ ì‹œìŠ¤í…œ
            - ì•ˆì „ êµìœ¡ ë° í›ˆë ¨
                - ìœ„í—˜ í‰ê°€ ë° ì»¨ì„¤íŒ…

ì—°êµ¬ê°œë°œ
ë¯¸ë˜ ì•ˆì „ ê¸°ìˆ ì„ ìœ„í•œ ì§€ì†ì ì¸ ì—°êµ¬ê°œë°œ
    - ì‹ ì†Œì¬ ê°œë°œ
        - ì•ˆì „ ê¸°ìˆ  ì—°êµ¬
            - ì œí’ˆ í’ˆì§ˆ í–¥ìƒ
                - ì‚°í•™ í˜‘ë ¥ í”„ë¡œì íŠ¸`,
    employees: '',
    annualRevenue: '',
    website: '',
    history: `2018ë…„
01ì›”: ISO 9001: 2015 ì¸ì¦ íšë“[Q209412]
09ì›”: í•œêµ­ì‚°ì—…ì€í–‰ìœ¼ë¡œ ë¶€í„° 4ì°¨ ì‚°ì—… ìœ ë§ê¸°ì—…ì¸[KDB - TECH]ê¸°ì—…ìœ¼ë¡œ ì„ ì •

2017ë…„
03ì›”: [ì™„ê°•ê¸°] ë°[ê°„ì´ì™„ê°•ê¸°] ì‹ ê·œ í˜•ì‹ìŠ¹ì¸ ì·¨ë“
03ì›”: ì´ˆë™ëŒ€ì²˜ ê¸°ë™í˜•[ì¸ëª…êµ¬ì¡°ë§¤íŠ¸] ê°œë°œ KFI ì¸ì¦ ì·¨ë“
05ì›”: í„°í‚¤ ê³µê¸°ì•ˆì „ë§¤íŠ¸ ìˆ˜ì¶œ
10ì›”: [ì¶©ì²­ë¶ë„ ì¤‘ì†Œê¸°ì—… ê²½ì˜ëŒ€ìƒ] ìˆ˜ìƒ - ì¶©ì²­ë¶ë„ ë„ì§€ì‚¬ìƒ

2016ë…„
01ì›”: ì¶©ì£¼ì‹œ 'ì„±ì‹¤ë‚©ì„¸ì' 3ë…„ ì—°ì† ì„ ì •
02ì›”: ì„œìš¸ ë™êµ­ëŒ€í•™êµì™€ ì‚°í•™í˜‘ë ¥ ì—°êµ¬ê¸°ìˆ  í˜‘ì•½ ì²´ê²°
03ì›”: ì—°êµ¬ì†Œê¸°ì—… '(ì£¼) ì„œí•œ ë””ì•¤ì—ìŠ¤' ì„¤ë¦½
04ì›”: ë² íŠ¸ë‚¨ ê²½ì°°êµ­ ê´€ê³µì„œ ê³µê¸°ì•ˆì „ë§¤íŠ¸ / ì´ë™ì‹ êµ¬ì¡°ëŒ€ 4ì°¨ ìˆ˜ì¶œ

2015ë…„
03ì›”: 'ì¤‘ì†Œê¸°ì—…ì²­'ìœ¼ë¡œë¶€í„°[ìˆ˜ì¶œ ìœ ë§ ê¸°ì—…]ìœ¼ë¡œ ì„ ì •
05ì›”: ëª½ê³¨ ì†Œë°©ë°©ì¬ì²­ ê³µê¸°ì•ˆì „ë§¤íŠ¸ / ì†Œë°©ì°¨ìš© êµ¬ì¡°ëŒ€ 3ì°¨ ìˆ˜ì¶œ
12ì›”: 'ì—¬ì„±ê°€ì¡±ë¶€'ì˜[ê°€ì¡±ì¹œí™” ì¸ì¦ê¸°ì—…]ì¸ì¦

2000ë…„
03ì›”: (ì£¼) ì„œí•œ ì—í”„ ì•¤ ì”¨ë¡œ ë²•ì¸ ì „í™˜

1992ë…„
05ì›”: ì„œí•œìƒì‚¬ ì„¤ë¦½`,
    vision: `ì„œí•œì—í”„ì•¤ì”¨ëŠ” ëŠì„ì—†ëŠ” ê¸°ìˆ  ê°œë°œê³¼ ìµœê³ ì˜ í’ˆì§ˆì„ ë°”íƒ•ìœ¼ë¡œ,\nì „ ì„¸ê³„ ê³ ê°ì—ê²Œ ê°€ì¥ ì‹ ë¢°ë°›ëŠ” ì•ˆì „ ì†”ë£¨ì…˜ì„ ì œê³µí•˜ì—¬\nì¸ë¥˜ì˜ ì•ˆì „ê³¼ í–‰ë³µ ì¦ì§„ì— ê¸°ì—¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.`,
    awardsAndCertifications: [],
    latitude: '',
    longitude: '',
    mapApiKey: '',
    directions: '',
    transportation: '',
};

const AdminCompanyPage = () => {
    const [data, setData] = useState<CompanyInfo>(defaultData);
    const [loading, setLoading] = useState(true);
    const [saving, setSaving] = useState(false);
    const [previewOpen, setPreviewOpen] = useState(false);
    const [originalData, setOriginalData] = useState<CompanyInfo>(defaultData);
    const [logo3dUpdating, setLogo3dUpdating] = useState(false); // 3D ë¡œê³  ì—…ë°ì´íŠ¸ ìƒíƒœ ì¶”ê°€
    const [historyStyleDialogOpen, setHistoryStyleDialogOpen] = useState(false); // ì—°í˜ ìŠ¤íƒ€ì¼ ë‹¤ì´ì–¼ë¡œê·¸ ìƒíƒœ
    const [historyCustomStyles, setHistoryCustomStyles] = useState({
        colorScheme: 'default', // default, blue, green, purple, orange
        timelineStyle: 'modern', // modern, classic, minimal
        showIcons: true,
        showDates: true,
        compactMode: false
    }); // ì—°í˜ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ ìƒíƒœ

    // 3D ë¡œê³  ì„¤ì • ë””ë°”ìš´ì‹±ì„ ìœ„í•œ ref
    const logo3dUpdateTimeoutRef = useRef<NodeJS.Timeout | null>(null);

    useEffect(() => {
        const fetchData = async () => {
            setLoading(true);
            try {
                console.log('Admin Company Page - Fetching data...');
                const res = await fetch('/api/admin/company', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Cache-Control': 'no-cache'
                    }
                });

                console.log('Admin Company Page - Response status:', res.status);

                if (res.ok) {
                    const fetchedData = await res.json();
                    console.log('Admin Company Page - Data fetched successfully:', fetchedData);

                    const newSocialLinks = {
                        ...(defaultData.socialLinks || {}),
                        ...(fetchedData.socialLinks || {}),
                    };
                    const newLogo3DSettings = { // Logo3DSettings ë³‘í•© ë¡œì§ ê°•í™”
                        ...defaultLogo3DSettings, // ê¸°ë³¸ê°’ìœ¼ë¡œ ì‹œì‘
                        ...(fetchedData.logo3dSettings || {}), // ì €ì¥ëœ ê°’ìœ¼ë¡œ ë®ì–´ì“°ê¸°
                        // glbFileUrlì€ fetchedData ìš°ì„ , ì—†ìœ¼ë©´ defaultData (ì´ë¯¸ defaultLogo3DSettingsì— í¬í•¨ë¨)
                        glbFileUrl: fetchedData.logo3dSettings?.glbFileUrl || defaultLogo3DSettings.glbFileUrl,
                        // ë‚˜ë¨¸ì§€ í•„ë“œë“¤ë„ fetchedData ìš°ì„  ì ìš© (ì´ë¯¸ ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¡œ ì²˜ë¦¬ë¨)
                    };
                    const mergedData = {
                        ...defaultData,
                        ...fetchedData,
                        socialLinks: newSocialLinks,
                        showAboutIntroSection: fetchedData.showAboutIntroSection !== undefined ? fetchedData.showAboutIntroSection : defaultData.showAboutIntroSection,
                        logo3dSettings: newLogo3DSettings,
                        philosophyStatement: fetchedData.philosophyStatement || defaultData.philosophyStatement || '',
                        coreValues: (fetchedData.coreValues && fetchedData.coreValues.length > 0) ? fetchedData.coreValues : defaultData.coreValues || [],
                        awardsAndCertifications: (fetchedData.awardsAndCertifications && fetchedData.awardsAndCertifications.length > 0) ? fetchedData.awardsAndCertifications : defaultData.awardsAndCertifications || [],
                        aboutPageMainTitleClassName: fetchedData.aboutPageMainTitleClassName || defaultData.aboutPageMainTitleClassName,
                    };
                    setData(mergedData);
                    setOriginalData(mergedData);
                } else {
                    console.error('Admin Company Page - Response not ok:', res.status, res.statusText);
                    const errorText = await res.text();
                    console.error('Admin Company Page - Error response:', errorText);
                    toast.error(`íšŒì‚¬ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (${res.status})`);
                    setData(defaultData);
                    setOriginalData(defaultData);
                }
            } catch (error) {
                console.error('Admin Company Page - Fetch error:', error);
                toast.error(`íšŒì‚¬ ì •ë³´ ë¡œë”© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);

                // ì˜¤ë¥˜ ë°œìƒ ì‹œì—ë„ ê¸°ë³¸ ë°ì´í„° êµ¬ì¡°ë¥¼ ìœ ì§€
                const fallbackData = {
                    ...defaultData,
                    awardsAndCertifications: defaultData.awardsAndCertifications || []
                };
                setData(fallbackData);
                setOriginalData(fallbackData);
            } finally {
                setLoading(false);
            }
        };

        fetchData();

        // Cleanup function
        return () => {
            if (logo3dUpdateTimeoutRef.current) {
                clearTimeout(logo3dUpdateTimeoutRef.current);
            }
        };
    }, []);

    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, parent?: keyof CompanyInfo | 'logo3dSettings') => {
        const { name, value } = e.target;
        if (parent === 'logo3dSettings') {
            // 3D ë¡œê³  ì„¤ì • ë³€ê²½ ì‹œ ë””ë°”ìš´ì‹± ì ìš©
            setLogo3dUpdating(true);

            if (logo3dUpdateTimeoutRef.current) {
                clearTimeout(logo3dUpdateTimeoutRef.current);
            }

            setData(prev => ({
                ...prev,
                logo3dSettings: {
                    ...(prev.logo3dSettings || {}),
                    [name]: (name === 'rotationSpeed' || name === 'modelScale') ? parseFloat(value) : value,
                },
            }));

            logo3dUpdateTimeoutRef.current = setTimeout(() => {
                setLogo3dUpdating(false);
            }, 300);
        } else if (parent) {
            setData(prev => ({
                ...prev,
                [parent as keyof CompanyInfo]: {
                    ...(prev[parent as keyof CompanyInfo] as object),
                    [name]: value,
                },
            }));
        } else {
            setData(prev => ({ ...prev, [name]: value }));
        }
    };

    const handleSwitchChange = (checked: boolean, name: keyof CompanyInfo | keyof Logo3DSettings, parent?: 'logo3dSettings') => {
        if (parent === 'logo3dSettings') {
            // 3D ë¡œê³  ì„¤ì • ë³€ê²½ ì‹œ ë””ë°”ìš´ì‹± ì ìš©
            setLogo3dUpdating(true);

            if (logo3dUpdateTimeoutRef.current) {
                clearTimeout(logo3dUpdateTimeoutRef.current);
            }

            setData(prev => ({
                ...prev,
                logo3dSettings: {
                    ...(prev.logo3dSettings || {}),
                    [name as keyof Logo3DSettings]: checked,
                },
            }));

            logo3dUpdateTimeoutRef.current = setTimeout(() => {
                setLogo3dUpdating(false);
            }, 300);
        } else {
            setData(prev => ({ ...prev, [name as keyof CompanyInfo]: checked }));
        }
    };

    const handleSliderChange = (value: number[], name: keyof Logo3DSettings, parent: 'logo3dSettings') => {
        if (parent === 'logo3dSettings') {
            // 3D ë¡œê³  ì„¤ì • ë³€ê²½ ì‹œ ë””ë°”ìš´ì‹± ì ìš©
            setLogo3dUpdating(true);

            if (logo3dUpdateTimeoutRef.current) {
                clearTimeout(logo3dUpdateTimeoutRef.current);
            }

            setData(prev => ({
                ...prev,
                logo3dSettings: {
                    ...(prev.logo3dSettings || {}),
                    [name]: value[0],
                }
            }));

            logo3dUpdateTimeoutRef.current = setTimeout(() => {
                setLogo3dUpdating(false);
            }, 300);
        }
    };

    const handleLogoUpload = (uploadedFile: { url: string }) => {
        setData(prev => ({ ...prev, logoUrl: uploadedFile.url }));
        toast.success('íšŒì‚¬ ë¡œê³ ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì£¼ì„¸ìš”.');
    };

    const handleAboutVisualUpload = (uploadedFile: { url: string }) => {
        setData(prev => ({ ...prev, aboutPageVisualUrl: uploadedFile.url }));
        toast.success('About í˜ì´ì§€ ëŒ€í‘œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì£¼ì„¸ìš”.');
    };

    const handleAboutHeroImageUpload = (uploadedFile: { url: string }) => {
        setData(prev => ({ ...prev, aboutPageHeroImageUrl: uploadedFile.url }));
        toast.success('About í˜ì´ì§€ íˆì–´ë¡œ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì£¼ì„¸ìš”.');
    };

    const handleLogo3DGlbUpload = (uploadedFile: { url: string }) => {
        setData(prev => ({
            ...prev,
            logo3dSettings: {
                ...(prev.logo3dSettings || defaultLogo3DSettings),
                glbFileUrl: uploadedFile.url,
            },
        }));
        toast.success('3D ë¡œê³  GLB íŒŒì¼ì´ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì£¼ì„¸ìš”.');
    };

    const resetChanges = () => {
        setData(originalData);
        toast.info('ë³€ê²½ ì‚¬í•­ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
    };

    const handleSave = async () => {
        setSaving(true);
        try {
            const res = await fetch('/api/admin/company', {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            });
            if (res.ok) {
                const savedData = await res.json();
                const newSocialLinks = {
                    ...(defaultData.socialLinks || {}),
                    ...(savedData.socialLinks || {}),
                };
                const newLogo3DSettings = {
                    ...(defaultData.logo3dSettings || {}),
                    ...(savedData.logo3dSettings || {}),
                };
                const mergedData = {
                    ...defaultData,
                    ...savedData,
                    socialLinks: newSocialLinks,
                    showAboutIntroSection: savedData.showAboutIntroSection !== undefined ? savedData.showAboutIntroSection : defaultData.showAboutIntroSection,
                    logo3dSettings: newLogo3DSettings,
                    philosophyStatement: savedData.philosophyStatement || defaultData.philosophyStatement || '',
                    coreValues: savedData.coreValues || [],
                    awardsAndCertifications: savedData.awardsAndCertifications || [],
                    aboutPageMainTitleClassName: savedData.aboutPageMainTitleClassName || defaultData.aboutPageMainTitleClassName, // ì¶”ê°€
                };
                setData(mergedData);
                setOriginalData(mergedData);
                toast.success('íšŒì‚¬ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                const errorData = await res.json();
                toast.error(`ì €ì¥ ì‹¤íŒ¨: ${errorData.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
            }
        } catch (error) {
            console.error('Error saving company data:', error);
            toast.error('íšŒì‚¬ ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        } finally {
            setSaving(false);
        }
    };

    const handleCoreValueItemChange = (index: number, e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
        const { name, value } = e.target;
        setData(prev => {
            const updatedCoreValues = [...(prev.coreValues || [])];
            updatedCoreValues[index] = {
                ...(updatedCoreValues[index] || { id: uuidv4() }),
                [name]: value,
            };
            return { ...prev, coreValues: updatedCoreValues };
        });
    };

    const addCoreValueItem = () => {
        setData(prev => ({
            ...prev,
            coreValues: [...(prev.coreValues || []), { id: uuidv4(), icon: 'Sparkles', mainTitle: '', subTitle: '', description: '' }],
        }));
    };

    const removeCoreValueItem = (index: number) => {
        setData(prev => ({
            ...prev,
            coreValues: (prev.coreValues || []).filter((_, i) => i !== index),
        }));
    };

    const handleAwardItemChange = (index: number, e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
        const { name, value } = e.target;
        setData(prev => {
            const updatedAwards = [...(prev.awardsAndCertifications || [])];
            if (updatedAwards[index]) {
                updatedAwards[index] = { ...updatedAwards[index], [name]: value };
            }
            return { ...prev, awardsAndCertifications: updatedAwards };
        });
    };

    const handleAwardImageUpload = (index: number, uploadedFile: { url: string }) => {
        setData(prev => {
            const updatedAwards = [...(prev.awardsAndCertifications || [])];
            if (updatedAwards[index]) {
                updatedAwards[index] = { ...updatedAwards[index], imageUrl: uploadedFile.url };
            }
            return { ...prev, awardsAndCertifications: updatedAwards };
        });
        toast.success(`ì¸ì¦/ìˆ˜ìƒ í•­ëª© ${index + 1}ì˜ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•´ì£¼ì„¸ìš”.`);
    };

    const addAwardItem = () => {
        setData(prev => ({
            ...prev,
            awardsAndCertifications: [
                ...(prev.awardsAndCertifications || []),
                { id: uuidv4(), title: '', description: '', year: '', issuingOrganization: '', imageUrl: '', link: '' }
            ]
        }));
    };

    const removeAwardItem = (index: number) => {
        setData(prev => ({
            ...prev,
            awardsAndCertifications: (prev.awardsAndCertifications || []).filter((_, i) => i !== index)
        }));
    };

    const handleSelectChange = (value: string, name: keyof Logo3DSettings, parent: 'logo3dSettings') => {
        if (parent === 'logo3dSettings') {
            // 3D ë¡œê³  ì„¤ì • ë³€ê²½ ì‹œ ë””ë°”ìš´ì‹± ì ìš©
            setLogo3dUpdating(true);

            if (logo3dUpdateTimeoutRef.current) {
                clearTimeout(logo3dUpdateTimeoutRef.current);
            }

            setData(prev => {
                const newLogoSettings = {
                    ...(prev.logo3dSettings || {}),
                    [name]: value,
                };
                // ë°°ê²½ ìœ í˜• ë³€ê²½ ì‹œ ê´€ë ¨ ê°’ ì´ˆê¸°í™” ë˜ëŠ” ê¸°ë³¸ê°’ ì„¤ì • (ì„ íƒì )
                if (name === 'viewerBackgroundType') {
                    if (value === 'color') {
                        newLogoSettings.viewerBackgroundHdriPath = defaultLogo3DSettings.viewerBackgroundHdriPath; // HDRI ê²½ë¡œ ì´ˆê¸°í™”/ê¸°ë³¸ê°’
                    } else if (value === 'hdri') {
                        newLogoSettings.viewerBackgroundColor = defaultLogo3DSettings.viewerBackgroundColor; // ìƒ‰ìƒê°’ ì´ˆê¸°í™”/ê¸°ë³¸ê°’
                    } else if (value === 'transparent') {
                        newLogoSettings.viewerBackgroundColor = defaultLogo3DSettings.viewerBackgroundColor;
                        newLogoSettings.viewerBackgroundHdriPath = defaultLogo3DSettings.viewerBackgroundHdriPath;
                    }
                }
                return {
                    ...prev,
                    logo3dSettings: newLogoSettings,
                };
            });

            logo3dUpdateTimeoutRef.current = setTimeout(() => {
                setLogo3dUpdating(false);
            }, 300);
        }
    };

    if (loading) {
        return <div className="p-6">ë¡œë”© ì¤‘...</div>;
    }

    const isChanged = JSON.stringify(data) !== JSON.stringify(originalData);

    // HTML/CSS ë³µì‚¬ ë° ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ë“¤
    const copyHistoryHTML = async () => {
        try {
            const htmlContent = generateHistoryHTML(data.history, historyCustomStyles);
            await navigator.clipboard.writeText(htmlContent);
            toast.success('HTML ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } catch (error) {
            toast.error('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    };

    const copyHistoryCSS = async () => {
        try {
            const cssContent = generateHistoryCSS(historyCustomStyles);
            await navigator.clipboard.writeText(cssContent);
            toast.success('CSS ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } catch (error) {
            toast.error('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    };

    const downloadHistoryCode = () => {
        try {
            const htmlContent = generateHistoryHTML(data.history, historyCustomStyles);
            const cssContent = generateHistoryCSS(historyCustomStyles);

            const fullContent = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íšŒì‚¬ ì—°í˜ íƒ€ì„ë¼ì¸</title>
    <style>
${cssContent}
    </style>
</head>
<body>
    <div class="timeline-container">
        <h1>íšŒì‚¬ ì—°í˜</h1>
${htmlContent}
    </div>
</body>
</html>`;

            const blob = new Blob([fullContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${data.nameKo || 'íšŒì‚¬'}_ì—°í˜_íƒ€ì„ë¼ì¸.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            toast.success('HTML íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
        } catch (error) {
            toast.error('ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    };

    // HTML ìƒì„± í•¨ìˆ˜
    const generateHistoryHTML = (historyText: string, styles: typeof historyCustomStyles) => {
        if (!historyText) return '';

        const lines = historyText.split('\n').filter(line => line.trim());
        let html = '';
        let currentYear = '';

        for (const line of lines) {
            const trimmedLine = line.trim();
            if (!trimmedLine) continue;

            // ì—°ë„ íŒ¨í„´ ë§¤ì¹­
            const yearMatch = trimmedLine.match(/^(\d{4})ë…„/);
            if (yearMatch) {
                if (currentYear) html += '    </div>\n'; // ì´ì „ ì—°ë„ ë‹«ê¸°
                currentYear = yearMatch[1];
                html += `    <div class="year-section" data-year="${currentYear}">\n`;
                html += `        <div class="year-header">\n`;
                html += `            <h2 class="year-title">${currentYear}ë…„</h2>\n`;
                html += `        </div>\n`;
                html += `        <div class="events-container">\n`;
                continue;
            }

            // ì›”/ì¼ ì´ë²¤íŠ¸ íŒ¨í„´ ë§¤ì¹­
            const eventMatch = trimmedLine.match(/^(\d{1,2})ì›”(?:\s*(\d{1,2})ì¼)?:\s*(.+)$/);
            if (eventMatch && currentYear) {
                const month = eventMatch[1];
                const day = eventMatch[2];
                const title = eventMatch[3];
                const isHighlighted = title.includes('[') && title.includes(']');
                const eventType = detectEventType(title);

                html += `            <div class="event-item ${isHighlighted ? 'highlighted' : ''}" data-type="${eventType}">\n`;
                if (styles.showIcons) {
                    html += `                <div class="event-icon ${eventType}"></div>\n`;
                }
                html += `                <div class="event-content">\n`;
                if (styles.showDates) {
                    html += `                    <div class="event-date">${month}ì›”${day ? ` ${day}ì¼` : ''}</div>\n`;
                }
                html += `                    <div class="event-title">${title}</div>\n`;
                html += `                </div>\n`;
                html += `            </div>\n`;
                continue;
            }

            // ë“¤ì—¬ì“°ê¸°ëœ ì„¸ë¶€ ë‚´ìš©
            if (line.startsWith('    ') || line.startsWith('\t')) {
                const detail = trimmedLine.replace(/^[-â€¢]\s*/, '');
                html += `                    <div class="event-detail">${detail}</div>\n`;
            }
        }

        if (currentYear) html += '        </div>\n    </div>\n'; // ë§ˆì§€ë§‰ ì—°ë„ ë‹«ê¸°

        return html;
    };

    // CSS ìƒì„± í•¨ìˆ˜
    const generateHistoryCSS = (styles: typeof historyCustomStyles) => {
        const colorSchemes = {
            default: {
                primary: '#3b82f6',
                secondary: '#10b981',
                accent: '#f59e0b',
                text: '#1f2937'
            },
            blue: {
                primary: '#3b82f6',
                secondary: '#1e40af',
                accent: '#60a5fa',
                text: '#1e3a8a'
            },
            green: {
                primary: '#10b981',
                secondary: '#047857',
                accent: '#34d399',
                text: '#064e3b'
            },
            purple: {
                primary: '#8b5cf6',
                secondary: '#7c3aed',
                accent: '#a78bfa',
                text: '#581c87'
            },
            orange: {
                primary: '#f59e0b',
                secondary: '#d97706',
                accent: '#fbbf24',
                text: '#92400e'
            }
        };

        const colors = colorSchemes[styles.colorScheme as keyof typeof colorSchemes] || colorSchemes.default;

        return `.timeline-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: ${colors.text};
}

.timeline-container h1 {
    text-align: center;
    color: ${colors.primary};
    margin-bottom: 40px;
    font-size: 2.5rem;
    font-weight: bold;
}

.year-section {
    margin-bottom: ${styles.compactMode ? '20px' : '40px'};
    position: relative;
}

.year-header {
    margin-bottom: ${styles.compactMode ? '15px' : '25px'};
    padding-bottom: 10px;
    border-bottom: 2px solid ${colors.primary};
}

.year-title {
    color: ${colors.primary};
    font-size: ${styles.compactMode ? '1.5rem' : '2rem'};
    font-weight: bold;
    margin: 0;
}

.events-container {
    position: relative;
    padding-left: ${styles.timelineStyle === 'minimal' ? '0' : '30px'};
}

${styles.timelineStyle !== 'minimal' ? `
.events-container::before {
    content: '';
    position: absolute;
    left: 15px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, ${colors.primary}, ${colors.secondary});
}
` : ''}

.event-item {
    position: relative;
    margin-bottom: ${styles.compactMode ? '15px' : '25px'};
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: ${styles.compactMode ? '10px' : '15px'};
    background: #f8fafc;
    border-radius: 8px;
    border-left: 4px solid ${colors.secondary};
    ${styles.timelineStyle === 'classic' ? 'box-shadow: 0 2px 4px rgba(0,0,0,0.1);' : ''}
}

.event-item.highlighted {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    border-left-color: ${colors.accent};
}

${styles.showIcons ? `
.event-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    color: white;
    flex-shrink: 0;
}

.event-icon.award { background: #f59e0b; }
.event-icon.establishment { background: #3b82f6; }
.event-icon.export { background: #10b981; }
.event-icon.development { background: #8b5cf6; }
.event-icon.general { background: #6b7280; }

.event-icon.award::before { content: 'ğŸ†'; }
.event-icon.establishment::before { content: 'ğŸ¢'; }
.event-icon.export::before { content: 'ğŸŒ'; }
.event-icon.development::before { content: 'ğŸš€'; }
.event-icon.general::before { content: 'ğŸ“…'; }
` : ''}

.event-content {
    flex: 1;
}

${styles.showDates ? `
.event-date {
    font-size: 0.875rem;
    color: ${colors.secondary};
    font-weight: 600;
    margin-bottom: 5px;
}
` : ''}

.event-title {
    font-weight: 600;
    color: ${colors.text};
    font-size: ${styles.compactMode ? '0.95rem' : '1rem'};
    line-height: 1.5;
}

.event-detail {
    font-size: 0.875rem;
    color: #6b7280;
    margin-top: 8px;
    padding-left: 15px;
    position: relative;
}

.event-detail::before {
    content: 'â€¢';
    position: absolute;
    left: 0;
    color: ${colors.secondary};
    font-weight: bold;
}

@media (max-width: 768px) {
    .timeline-container {
        padding: 15px;
    }
    
    .timeline-container h1 {
        font-size: 2rem;
        margin-bottom: 30px;
    }
    
    .year-title {
        font-size: 1.5rem;
    }
    
    .events-container {
        padding-left: ${styles.timelineStyle === 'minimal' ? '0' : '20px'};
    }
    
    .event-item {
        padding: 12px;
        gap: 10px;
    }
}`;
    };

    // ì´ë²¤íŠ¸ ìœ í˜•ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ëŠ” í•¨ìˆ˜
    const detectEventType = (text: string): 'award' | 'establishment' | 'export' | 'development' | 'general' => {
        const lowerText = text.toLowerCase();

        if (lowerText.includes('ì¸ì¦') || lowerText.includes('ìˆ˜ìƒ') || lowerText.includes('ìƒ') || lowerText.includes('ì„ ì •')) {
            return 'award';
        }
        if (lowerText.includes('ì„¤ë¦½') || lowerText.includes('ì°½ë¦½') || lowerText.includes('ë²•ì¸') || lowerText.includes('ì „í™˜')) {
            return 'establishment';
        }
        if (lowerText.includes('ìˆ˜ì¶œ') || lowerText.includes('ê³„ì•½') || lowerText.includes('í˜‘ì•½') || lowerText.includes('ì²´ê²°')) {
            return 'export';
        }
        if (lowerText.includes('ê°œë°œ') || lowerText.includes('ì¶œì‹œ') || lowerText.includes('ì™„ë£Œ') || lowerText.includes('ì·¨ë“')) {
            return 'development';
        }

        return 'general';
    };

    <div className={ADMIN_CARD_STYLES.DEFAULT}>
        <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")}>
            <div>
                <Label htmlFor="nameKo" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                    <Building className="mr-2 h-4 w-4" /> íšŒì‚¬ëª… (í•œê¸€)
                </Label>
                <Input id="nameKo" name="nameKo" value={data.nameKo} onChange={handleChange} placeholder="(ì£¼)ì„œí•œì—í”„ì•¤ì”¨" className={ADMIN_INPUT_STYLES.INPUT} />
            </div>
            <div>
                <Label htmlFor="nameEn" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                    <Globe className="mr-2 h-4 w-4" /> íšŒì‚¬ëª… (ì˜ë¬¸)
                </Label>
                <Input id="nameEn" name="nameEn" value={data.nameEn || ''} onChange={handleChange} placeholder="Seohan F&C Co., Ltd." className={ADMIN_INPUT_STYLES.INPUT} />
            </div>
            <div>
                <Label htmlFor="CEO" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                    <Users className="mr-2 h-4 w-4" /> ëŒ€í‘œì´ì‚¬
                </Label>
                <Input id="CEO" name="CEO" value={data.CEO || ''} onChange={handleChange} placeholder="í™ê¸¸ë™" className={ADMIN_INPUT_STYLES.INPUT} />
            </div>
            <div>
                <Label htmlFor="businessNumber" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                    <Info className="mr-2 h-4 w-4" /> ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸
                </Label>
                <Input id="businessNumber" name="businessNumber" value={data.businessNumber || ''} onChange={handleChange} placeholder="123-45-67890" className={ADMIN_INPUT_STYLES.INPUT} />
            </div>
            <div>
                <Label htmlFor="established" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                    <Clock className="mr-2 h-4 w-4" /> ì„¤ë¦½ì¼
                </Label>
                <Input id="established" name="established" type="date" value={data.established || ''} onChange={handleChange} className={ADMIN_INPUT_STYLES.INPUT} />
            </div>
        </div>
    </div>
                    </div >
                </TabsContent >

                <TabsContent value="logo3d">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <FileUpload
                                    endpoint="logo3DModel"
                                    fileType="company/logo3d"
                                    onUploadSuccess={handleLogo3DGlbUpload}
                                    buttonText="GLB ëª¨ë¸ ì—…ë¡œë“œ (.glb)"
                                    accept=".glb"
                                    maxSizeMb={20}
                                />
                                {data.logo3dSettings?.glbFileUrl && (
                                    <div className="mt-3 space-y-1">
                                        <p className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>í˜„ì¬ ëª¨ë¸ íŒŒì¼:</p>
                                        <a
                                            href={data.logo3dSettings.glbFileUrl}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className={cn(ADMIN_UI.TEXT_LINK, ADMIN_UI.TEXT_SM, "text-sm break-all")}
                                        >
                                            {data.logo3dSettings.glbFileUrl.split('/').pop() || data.logo3dSettings.glbFileUrl}
                                        </a>
                                    </div>
                                )}
                                <p className="text-xs text-gray-400 mt-2">3D ë¡œê³ ì— ì‚¬ìš©ë  GLB íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ í™•ì¥ìëŠ” <code>.glb</code> ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>

                        {/* 3D ë¡œê³  ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€ */}
                        {data.logo3dSettings && (
                            <div className={cn(ADMIN_CARD_STYLES.DEFAULT, "h-[400px]")}>
                                <div className={cn(ADMIN_CARD_STYLES.CONTENT, "h-full")}>
                                    <div className="flex items-center justify-between mb-3">
                                        <h3 className={cn(ADMIN_HEADING_STYLES.SUBSECTION_TITLE)}>ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°</h3>
                                        <div className="flex items-center gap-2">
                                            {logo3dUpdating && (
                                                <div className="flex items-center text-xs text-blue-400">
                                                    <div className="animate-spin rounded-full h-3 w-3 border-b border-blue-400 mr-1"></div>
                                                    ì—…ë°ì´íŠ¸ ì¤‘...
                                                </div>
                                            )}
                                            <div className="text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded">
                                                ìŠ¤íƒ€ì¼: {data.logo3dSettings.stylePreset || 'default'}
                                            </div>
                                        </div>
                                    </div>
                                    <div className="w-full h-[calc(100%-3rem)] rounded-lg overflow-hidden border border-gray-700 bg-gray-900/50 relative">
                                        <React.Suspense fallback={
                                            <div className="w-full h-full flex items-center justify-center">
                                                <div className="text-center">
                                                    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-2"></div>
                                                    <p className="text-sm text-gray-400">3D ëª¨ë¸ ë¡œë”© ì¤‘...</p>
                                                </div>
                                            </div>
                                        }>
                                            <Logo3D settings={data.logo3dSettings} />
                                        </React.Suspense>
                                        {!data.logo3dSettings.glbFileUrl && (
                                            <div className="absolute top-2 right-2 bg-yellow-600/80 text-yellow-100 text-xs px-2 py-1 rounded">
                                                ê¸°ë³¸ ëª¨ë¸
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <div className="flex items-center justify-between mb-4">
                                    <Label htmlFor="enableRotation" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        {data.logo3dSettings?.enableRotation ? <Eye className="mr-2 h-5 w-5 text-green-500" /> : <EyeOff className="mr-2 h-5 w-5 text-red-500" />} ìë™ íšŒì „
                                    </Label>
                                    <Switch
                                        id="enableRotation"
                                        checked={!!data.logo3dSettings?.enableRotation} // boolean ê°’ìœ¼ë¡œ ëª…í™•íˆ
                                        onCheckedChange={(checked) => handleSwitchChange(checked, 'enableRotation', 'logo3dSettings')}
                                    />
                                </div>
                                {data.logo3dSettings?.enableRotation && (
                                    <div className="space-y-2">
                                        <Label htmlFor="rotationSpeed" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>íšŒì „ ì†ë„ (ê¸°ë³¸ê°’: 0.0015)</Label>
                                        <div className="flex items-center gap-2">
                                            <Slider
                                                id="rotationSpeed"
                                                min={0.0001}
                                                max={0.01}
                                                step={0.0001}
                                                value={[data.logo3dSettings?.rotationSpeed || defaultLogo3DSettings.rotationSpeed!]}
                                                onValueChange={(value) => handleSliderChange(value, 'rotationSpeed', 'logo3dSettings')}
                                                className="w-[calc(100%-5rem)]"
                                            />
                                            <Input
                                                type="number"
                                                value={data.logo3dSettings?.rotationSpeed || defaultLogo3DSettings.rotationSpeed!}
                                                onChange={(e) => handleChange(e, 'logo3dSettings')}
                                                name="rotationSpeed"
                                                className="w-20 appearance-none [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
                                                step={0.0001}
                                            />
                                        </div>
                                        <p className="text-xs text-gray-400">ê°’ì´ í´ìˆ˜ë¡ ë¹ ë¥´ê²Œ íšŒì „í•©ë‹ˆë‹¤.</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹, ë°°ê²½ìƒ‰, ëª¨ë¸ í¬ê¸° ì„¤ì • UI */}
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <div className="space-y-4">
                                    <div>
                                        <Label htmlFor="stylePreset" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹</Label>
                                        <Select
                                            value={data.logo3dSettings?.stylePreset || defaultLogo3DSettings.stylePreset!}
                                            onValueChange={(value) => handleSelectChange(value, 'stylePreset', 'logo3dSettings')}
                                        >
                                            <SelectTrigger className={ADMIN_INPUT_STYLES.INPUT}>
                                                <SelectValue placeholder="í”„ë¦¬ì…‹ ì„ íƒ" />
                                            </SelectTrigger>
                                            <SelectContent>
                                                <SelectItem value="default">ê¸°ë³¸ (Default)</SelectItem>
                                                <SelectItem value="metallic">ë©”íƒˆë¦­ (Metallic)</SelectItem>
                                                <SelectItem value="vibrant">ìƒë™ê° (Vibrant)</SelectItem>
                                                <SelectItem value="darkElegant">ì–´ë‘¡ê³  ìš°ì•„í•˜ê²Œ (Dark Elegant)</SelectItem>
                                                <SelectItem value="minimalLight">ë¯¸ë‹ˆë©€ ë¼ì´íŠ¸ (Minimal Light)</SelectItem>
                                            </SelectContent>
                                        </Select>
                                        <p className="text-xs text-gray-400 mt-1">3D ë¡œê³ ì˜ ì „ì²´ì ì¸ ë¶„ìœ„ê¸°ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>
                                    </div>

                                    <div>
                                        <Label htmlFor="viewerBackgroundColor" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ë·°ì–´ ë°°ê²½ìƒ‰</Label>
                                        <Input
                                            id="viewerBackgroundColor"
                                            name="viewerBackgroundColor"
                                            value={data.logo3dSettings?.viewerBackgroundColor || defaultLogo3DSettings.viewerBackgroundColor!}
                                            onChange={(e) => handleChange(e, 'logo3dSettings')}
                                            className={ADMIN_INPUT_STYLES.INPUT}
                                            placeholder="ì˜ˆ: transparent, #FFFFFF, rgba(0,0,0,0.5)"
                                        />
                                        <p className="text-xs text-gray-400 mt-1">ë°°ê²½ìƒ‰ì„ ì…ë ¥í•©ë‹ˆë‹¤. íˆ¬ëª…í•˜ê²Œ í•˜ë ¤ë©´ 'transparent'ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
                                    </div>

                                    <div>
                                        <Label htmlFor="modelScale" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ëª¨ë¸ í¬ê¸° (ê¸°ë³¸ê°’: 1)</Label>
                                        <div className="flex items-center gap-2">
                                            <Slider
                                                id="modelScale"
                                                min={0.1}
                                                max={3}
                                                step={0.05}
                                                value={[data.logo3dSettings?.modelScale || defaultLogo3DSettings.modelScale!]}
                                                onValueChange={(value) => handleSliderChange(value, 'modelScale', 'logo3dSettings')}
                                                className="w-[calc(100%-5rem)]"
                                            />
                                            <Input
                                                type="number"
                                                name="modelScale"
                                                value={data.logo3dSettings?.modelScale || defaultLogo3DSettings.modelScale!}
                                                onChange={(e) => handleChange(e, 'logo3dSettings')}
                                                className="w-20 appearance-none [-moz-appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
                                                step={0.05}
                                                min={0.1}
                                                max={3}
                                            />
                                        </div>
                                        <p className="text-xs text-gray-400">3D ëª¨ë¸ì˜ ì „ì²´ í¬ê¸°ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* ê¸°ì¡´ ìƒ‰ìƒ ì„¤ì • UI ì œê±° */}
                        {/*
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <div className="space-y-3">
                                    <div className="space-y-2">
                                        <Label htmlFor="colorS" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>'S' ë§ˆí¬ ìƒ‰ìƒ (ì˜ˆ: #FF3030)</Label>
                                <Input
                                            id="colorS"
                                            name="colorS"
                                            value={data.logo3dSettings?.colorS || defaultLogo3DSettings.colorS!}
                                            onChange={(e) => handleChange(e, 'logo3dSettings')}
                                            className={ADMIN_INPUT_STYLES.INPUT}
                                            placeholder="#RRGGBB"
                                />
                            </div>
                                     // ... ë‹¤ë¥¸ ìƒ‰ìƒ ì…ë ¥ í•„ë“œë“¤ ...
                                </div>
                            </div>
                        </div>
                        */}

                        {/* ê¸°ì¡´ ì•ˆë‚´ ë¬¸êµ¬ ì œê±° ë˜ëŠ” ì¡°ê±´ë¶€ ë Œë”ë§ (ì—¬ê¸°ì„œëŠ” ì¼ë‹¨ ì œê±°) */}
                        {/*
                        <div className="mt-6 p-4 border border-dashed border-yellow-500/50 rounded-md bg-yellow-500/10">
                            <p className="text-sm text-yellow-300">
                                <Info className="inline h-4 w-4 mr-1" /> í˜„ì¬ 3D ë¡œê³  ë¯¸ë¦¬ë³´ê¸°ëŠ” ì œê³µë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. About í˜ì´ì§€ì—ì„œ 'ì¸ì‚¬ë§ ë° íšŒì‚¬ê°œìš”' ì„¹ì…˜ì˜ ëŒ€í‘œ ì´ë¯¸ì§€ë¥¼ ì œê±°í•œ í›„ ì‹¤ì œ ëª¨ìŠµì„ í™•ì¸í•´ì£¼ì„¸ìš”.
                            </p>
                        </div>
                        */}
                    </div>
                </TabsContent>

                <TabsContent value="vision">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <Label htmlFor="vision" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ë¹„ì „ ìƒì„¸ ë‚´ìš©</Label>
                                <Textarea
                                    id="vision"
                                    name="vision"
                                    value={data.vision || ''}
                                    onChange={handleChange}
                                    placeholder="íšŒì‚¬ì˜ ë¹„ì „ì„ ìƒì„¸íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”. ì¤„ë°”ê¿ˆì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë¬¸ë‹¨ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                                    className={ADMIN_INPUT_STYLES.INPUT}
                                    rows={15}
                                />
                                <p className="text-xs text-gray-400 mt-1">ì´ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì˜ íšŒì‚¬ ë¹„ì „ ê´€ë ¨ í˜ì´ì§€ ë˜ëŠ” ì„¹ì…˜ì— í‘œì‹œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="philosophy">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <Label htmlFor="philosophyStatement" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ê²½ì˜ ì² í•™ ìƒì„¸ ë‚´ìš©</Label>
                                <Textarea
                                    id="philosophyStatement"
                                    name="philosophyStatement"
                                    value={data.philosophyStatement || ''}
                                    onChange={handleChange}
                                    placeholder="íšŒì‚¬ì˜ ë…ë¦½ì ì¸ ê²½ì˜ ì² í•™ì„ ìƒì„¸íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”. ì´ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ê²½ì˜ ì² í•™ ì„¹ì…˜ì— í‘œì‹œë©ë‹ˆë‹¤."
                                    className={ADMIN_INPUT_STYLES.INPUT}
                                    rows={15}
                                />
                                <p className="text-xs text-gray-400 mt-1">ì´ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ê²½ì˜ ì² í•™ ê´€ë ¨ í˜ì´ì§€ ë˜ëŠ” ì„¹ì…˜ì— ë…ë¦½ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="coreValues">
                    <div className="space-y-6">
                        <div className="flex justify-end">
                            <Button onClick={addCoreValueItem} className={cn(ADMIN_UI.BUTTON_PRIMARY, ADMIN_BUTTON_SIZES.SM)}>
                                <PlusCircle className="mr-2 h-4 w-4" /> í•µì‹¬ê°€ì¹˜ ì¶”ê°€
                            </Button>
                        </div>
                        {(data.coreValues || []).map((item, index) => (
                            <div key={item.id || index} className={cn(ADMIN_CARD_STYLES.DEFAULT, "relative")}>
                                <Button
                                    variant="ghost"
                                    size="sm"
                                    className="absolute top-2 right-2 text-red-500 hover:text-red-700"
                                    onClick={() => removeCoreValueItem(index)}
                                >
                                    <Trash2 className="h-4 w-4" />
                                </Button>
                                <div className={ADMIN_CARD_STYLES.CONTENT}>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <Label htmlFor={`coreValue-icon-${index}`} className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ì•„ì´ì½˜ (Lucide ì•„ì´ì½˜ ì´ë¦„)</Label>
                                            <Input
                                                id={`coreValue-icon-${index}`}
                                                name="icon"
                                                value={item.icon || ''}
                                                onChange={(e) => handleCoreValueItemChange(index, e)}
                                                placeholder="ì˜ˆ: Zap, Shield, Target"
                                                className={ADMIN_INPUT_STYLES.INPUT}
                                            />
                                            <p className="text-xs text-gray-400 mt-1">Lucide ì•„ì´ì½˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”. <a href="https://lucide.dev/icons/" target="_blank" rel="noopener noreferrer" className="text-primary hover:underline">ì—¬ê¸°</a>ì„œ ì°¾ì•„ë³´ì„¸ìš”.</p>
                                        </div>
                                        <div>
                                            <Label htmlFor={`coreValue-mainTitle-${index}`} className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ë©”ì¸ íƒ€ì´í‹€</Label>
                                            <Input
                                                id={`coreValue-mainTitle-${index}`}
                                                name="mainTitle"
                                                value={item.mainTitle || ''}
                                                onChange={(e) => handleCoreValueItemChange(index, e)}
                                                placeholder="í•µì‹¬ê°€ì¹˜ ë©”ì¸ ì œëª©"
                                                className={ADMIN_INPUT_STYLES.INPUT}
                                            />
                                        </div>
                                    </div>
                                    <div className="mt-4">
                                        <Label htmlFor={`coreValue-subTitle-${index}`} className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ì„œë¸Œ íƒ€ì´í‹€</Label>
                                        <Input
                                            id={`coreValue-subTitle-${index}`}
                                            name="subTitle"
                                            value={item.subTitle || ''}
                                            onChange={(e) => handleCoreValueItemChange(index, e)}
                                            placeholder="í•µì‹¬ê°€ì¹˜ ë¶€ì œëª© (ì„ íƒ ì‚¬í•­)"
                                            className={ADMIN_INPUT_STYLES.INPUT}
                                        />
                                    </div>
                                    <div className="mt-4">
                                        <Label htmlFor={`coreValue-description-${index}`} className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ë³¸ë¬¸ ë‚´ìš©</Label>
                                        <Textarea
                                            id={`coreValue-description-${index}`}
                                            name="description"
                                            value={item.description || ''}
                                            onChange={(e) => handleCoreValueItemChange(index, e)}
                                            placeholder="í•µì‹¬ê°€ì¹˜ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…"
                                            className={ADMIN_INPUT_STYLES.INPUT}
                                            rows={4}
                                        />
                                    </div>
                                </div>
                            </div>
                        ))}
                        {(!data.coreValues || data.coreValues.length === 0) && (
                            <p className={cn(ADMIN_UI.TEXT_MUTED, "text-center py-8")}>ë“±ë¡ëœ í•µì‹¬ê°€ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤. 'í•µì‹¬ê°€ì¹˜ ì¶”ê°€' ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒˆ í•­ëª©ì„ ë§Œë“œì„¸ìš”.</p>
                        )}
                    </div>
                </TabsContent>

                <TabsContent value="mainBusiness">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <Label htmlFor="businessType" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ì£¼ìš” ì‚¬ì—… ì˜ì—­ ìƒì„¸ ì„¤ëª…</Label>
                                <Textarea
                                    id="businessType"
                                    name="businessType"
                                    value={data.businessType || ''}
                                    onChange={handleChange}
                                    placeholder="íšŒì‚¬ì˜ ì£¼ìš” ì‚¬ì—… ë¶„ì•¼ ë° ì„œë¹„ìŠ¤ì— ëŒ€í•´ ìƒì„¸íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”. ì¤„ë°”ê¿ˆìœ¼ë¡œ ì—¬ëŸ¬ í•­ëª©ì„ êµ¬ë¶„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                                    className={ADMIN_INPUT_STYLES.INPUT}
                                    rows={15}
                                />
                                <p className="text-xs text-gray-400 mt-1">ì´ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì˜ ì‚¬ì—… ì†Œê°œ ê´€ë ¨ í˜ì´ì§€ì— í‘œì‹œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ì„¸ë¶€ ì •ë³´' íƒ­ì˜ 'ì£¼ìš” ì‚¬ì—…' í•­ëª©ê³¼ ë™ì¼í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="keyHistory">
                    <div className="space-y-6">
                        {/* ì—°í˜ ì…ë ¥ ì„¹ì…˜ */}
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <Label htmlFor="history" className={cn(ADMIN_INPUT_STYLES.LABEL, ADMIN_UI.TEXT_SM)}>ì£¼ìš” ì—°í˜ ìƒì„¸ ë‚´ìš©</Label>
                                <Textarea
                                    id="history"
                                    name="history"
                                    value={data.history || ''}
                                    onChange={handleChange}
                                    placeholder="íšŒì‚¬ì˜ ì£¼ìš” ì—°í˜ì„ ì‹œê°„ ìˆœì„œëŒ€ë¡œ ìƒì„¸íˆ ê¸°ìˆ í•´ì£¼ì„¸ìš”. ì˜ˆ: 'YYYYë…„ MMì›”: ì£¼ìš” ì´ë²¤íŠ¸ ë‚´ìš©'"
                                    className={ADMIN_INPUT_STYLES.INPUT}
                                    rows={20}
                                />
                                <p className="text-xs text-gray-400 mt-1">ì´ ë‚´ìš©ì€ ì›¹ì‚¬ì´íŠ¸ì˜ íšŒì‚¬ ì—°í˜ í˜ì´ì§€ì— í‘œì‹œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ì„¸ë¶€ ì •ë³´' íƒ­ì˜ 'íšŒì‚¬ ì—°í˜ (ê°„ëµíˆ)' í•­ëª©ê³¼ ë™ì¼í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>

                        {/* ì—°í˜ ë¹„ì£¼ì–¼ ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ */}
                        {data.history && (
                            <div className={ADMIN_CARD_STYLES.DEFAULT}>
                                <div className={ADMIN_CARD_STYLES.CONTENT}>
                                    <div className="flex items-center justify-between mb-4">
                                        <h3 className={cn(ADMIN_HEADING_STYLES.SUBSECTION_TITLE, "flex items-center")}>
                                            <ScrollText className="mr-2 h-5 w-5 text-blue-400" />
                                            ì—°í˜ íƒ€ì„ë¼ì¸ ë¯¸ë¦¬ë³´ê¸°
                                        </h3>
                                        <div className="flex items-center gap-2">
                                            <Button
                                                onClick={() => setHistoryStyleDialogOpen(true)}
                                                variant="outline"
                                                size="sm"
                                                className="text-blue-400 border-blue-400 hover:bg-blue-400/10"
                                            >
                                                <Palette className="mr-1 h-4 w-4" />
                                                ìŠ¤íƒ€ì¼ ì„¤ì •
                                            </Button>
                                            <div className="text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded">
                                                ìë™ ìƒì„±ë¨
                                            </div>
                                        </div>
                                    </div>
                                    <div className="max-h-96 overflow-y-auto border border-gray-700 rounded-lg p-4 bg-gray-900/50">
                                        <HistoryTimeline
                                            historyText={data.history}
                                            customStyles={historyCustomStyles}
                                        />
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* ì‘ì„± ê·œì¹™ ì•ˆë‚´ ì„¹ì…˜ */}
                        <div className={cn(ADMIN_CARD_STYLES.DEFAULT, "border-blue-500/30")}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <h3 className={cn(ADMIN_HEADING_STYLES.SUBSECTION_TITLE, "flex items-center text-blue-400 mb-4")}>
                                    <Info className="mr-2 h-5 w-5" />
                                    ì—°í˜ ì‘ì„± ê·œì¹™ ë° ë¹„ì£¼ì–¼ ìë™ ì ìš© ì•ˆë‚´
                                </h3>

                                <div className="space-y-4 text-sm text-gray-300">
                                    <div className="bg-gray-800/50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-blue-300 mb-2">ğŸ“ ê¸°ë³¸ ì‘ì„± í˜•ì‹</h4>
                                        <div className="space-y-2 text-xs">
                                            <p><code className="bg-gray-700 px-1 rounded">YYYYë…„</code> ë˜ëŠ” <code className="bg-gray-700 px-1 rounded">YYYYë…„ MMì›”</code>ë¡œ ì‹œì‘í•˜ëŠ” ì¤„ì€ ìë™ìœ¼ë¡œ ì—°ë„ í—¤ë”ë¡œ ì¸ì‹ë©ë‹ˆë‹¤.</p>
                                            <p><code className="bg-gray-700 px-1 rounded">MMì›”:</code> ë˜ëŠ” <code className="bg-gray-700 px-1 rounded">MMì›” DDì¼:</code>ë¡œ ì‹œì‘í•˜ëŠ” ì¤„ì€ í•´ë‹¹ ì—°ë„ì˜ ì„¸ë¶€ ì´ë²¤íŠ¸ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
                                            <p>ë“¤ì—¬ì“°ê¸°(ê³µë°± ë˜ëŠ” íƒ­)ëœ ì¤„ì€ ìƒìœ„ ì´ë²¤íŠ¸ì˜ ì„¸ë¶€ ë‚´ìš©ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
                                        </div>
                                    </div>

                                    <div className="bg-gray-800/50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-green-300 mb-2">âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ</h4>
                                        <pre className="text-xs bg-gray-900 p-3 rounded border-l-4 border-green-500 overflow-x-auto">
                                            {`2018ë…„
01ì›”: ISO 9001: 2015 ì¸ì¦ íšë“[Q209412]
09ì›”: í•œêµ­ì‚°ì—…ì€í–‰ìœ¼ë¡œ ë¶€í„° 4ì°¨ ì‚°ì—… ìœ ë§ê¸°ì—…ì¸[KDB - TECH]ê¸°ì—…ìœ¼ë¡œ ì„ ì •

2017ë…„ 3ì›”
03ì›”: [ì™„ê°•ê¸°] ë°[ê°„ì´ì™„ê°•ê¸°] ì‹ ê·œ í˜•ì‹ìŠ¹ì¸ ì·¨ë“
    - ì†Œë°©ì²­ í˜•ì‹ìŠ¹ì¸ ì™„ë£Œ
    - ì•ˆì „ì„± í…ŒìŠ¤íŠ¸ í†µê³¼
05ì›”: í„°í‚¤ ê³µê¸°ì•ˆì „ë§¤íŠ¸ ìˆ˜ì¶œ
10ì›”: [ì¶©ì²­ë¶ë„ ì¤‘ì†Œê¸°ì—… ê²½ì˜ëŒ€ìƒ] ìˆ˜ìƒ - ì¶©ì²­ë¶ë„ ë„ì§€ì‚¬ìƒ`}
                                        </pre>
                                    </div>

                                    <div className="bg-gray-800/50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-orange-300 mb-2">ğŸ¨ ë¹„ì£¼ì–¼ ìë™ ì ìš© ê·œì¹™</h4>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs">
                                            <div>
                                                <p className="font-medium text-orange-200 mb-1">ì—°ë„ë³„ ìƒ‰ìƒ êµ¬ë¶„:</p>
                                                <ul className="space-y-1 ml-4">
                                                    <li>â€¢ ìµœì‹  ì—°ë„: <span className="text-blue-400">íŒŒë€ìƒ‰</span></li>
                                                    <li>â€¢ ì¤‘ê°„ ì—°ë„: <span className="text-green-400">ì´ˆë¡ìƒ‰</span></li>
                                                    <li>â€¢ ê³¼ê±° ì—°ë„: <span className="text-gray-400">íšŒìƒ‰</span></li>
                                                </ul>
                                            </div>
                                            <div>
                                                <p className="font-medium text-orange-200 mb-1">ì´ë²¤íŠ¸ ìœ í˜•ë³„ ì•„ì´ì½˜:</p>
                                                <ul className="space-y-1 ml-4">
                                                    <li>â€¢ ì¸ì¦/ìˆ˜ìƒ: ğŸ† íŠ¸ë¡œí”¼</li>
                                                    <li>â€¢ ì„¤ë¦½/ì°½ë¦½: ğŸ¢ ê±´ë¬¼</li>
                                                    <li>â€¢ ìˆ˜ì¶œ/ê³„ì•½: ğŸŒ ê¸€ë¡œë¸Œ</li>
                                                    <li>â€¢ ê°œë°œ/ì¶œì‹œ: ğŸš€ ë¡œì¼“</li>
                                                    <li>â€¢ ê¸°íƒ€: ğŸ“… ìº˜ë¦°ë”</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-gray-800/50 p-4 rounded-lg">
                                        <h4 className="font-semibold text-purple-300 mb-2">ğŸ’¡ ì‘ì„± íŒ</h4>
                                        <div className="text-xs space-y-1">
                                            <p>â€¢ ì—°ë„ëŠ” ë‚´ë¦¼ì°¨ìˆœ(ìµœì‹  â†’ ê³¼ê±°)ìœ¼ë¡œ ì‘ì„±í•˜ë©´ íƒ€ì„ë¼ì¸ì´ ë” ë³´ê¸° ì¢‹ìŠµë‹ˆë‹¤.</p>
                                            <p>â€¢ ì¤‘ìš”í•œ ì´ë²¤íŠ¸ëŠ” ëŒ€ê´„í˜¸ <code className="bg-gray-700 px-1 rounded">[ë‚´ìš©]</code>ë¡œ ê°•ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                                            <p>â€¢ ì„¸ë¶€ ë‚´ìš©ì€ ë“¤ì—¬ì“°ê¸°ë¡œ êµ¬ì¡°í™”í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.</p>
                                            <p>â€¢ ì›”/ì¼ ì •ë³´ê°€ ìˆìœ¼ë©´ ë” ì •í™•í•œ íƒ€ì„ë¼ì¸ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="awards" className="pt-6">
                    <div className={ADMIN_CARD_STYLES.DEFAULT}>
                        <div className={cn(ADMIN_CARD_STYLES.HEADER, "flex justify-between items-center")}>
                            <h3 className={cn(ADMIN_HEADING_STYLES.CARD_TITLE, "flex items-center")}>
                                <Award className="w-5 h-5 mr-3 text-orange-400" />ì¸ì¦ ë° ìˆ˜ìƒ ê´€ë¦¬
                            </h3>
                            <Button onClick={addAwardItem} size="sm" className={ADMIN_UI.BUTTON_PRIMARY}>
                                <PlusCircle className="w-4 h-4 mr-2" /> í•­ëª© ì¶”ê°€
                            </Button>
                        </div>
                        <div className={ADMIN_CARD_STYLES.CONTENT}>
                            {(data.awardsAndCertifications && data.awardsAndCertifications.length > 0) ? (
                                <div className="space-y-6">
                                    {data.awardsAndCertifications.map((item, index) => (
                                        <div key={item.id || `award-${index}`} className={cn(ADMIN_CARD_STYLES.ACCENT, "p-6 rounded-xl shadow-lg relative")}>
                                            <Button
                                                variant="ghost"
                                                size="icon"
                                                onClick={() => removeAwardItem(index)}
                                                className="absolute top-3 right-3 text-gray-400 hover:text-red-500 hover:bg-red-900/30 w-8 h-8"
                                                title={`í•­ëª© ${index + 1} ì‚­ì œ`}
                                            >
                                                <Trash2 className="w-4 h-4" />
                                            </Button>
                                            <h4 className={cn(ADMIN_HEADING_STYLES.SUBSECTION_TITLE, "text-orange-300 mb-4 border-b border-gray-700 pb-2")}>í•­ëª© {index + 1}</h4>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                                                <div className="md:col-span-1 space-y-4">
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-title-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ì œëª© <span className="text-red-500">*</span></Label>
                                                        <Input
                                                            id={`award-title-${item.id || index}`}
                                                            name="title"
                                                            value={item.title}
                                                            onChange={(e) => handleAwardItemChange(index, e)}
                                                            className={ADMIN_INPUT_STYLES.INPUT}
                                                            placeholder="ì˜ˆ: ISO 9001 ì¸ì¦"
                                                            required
                                                        />
                                                    </div>
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-year-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ì·¨ë“ ì—°ë„</Label>
                                                        <Input id={`award-year-${item.id || index}`} name="year" value={item.year || ''} onChange={(e) => handleAwardItemChange(index, e)} className={ADMIN_INPUT_STYLES.INPUT} placeholder="ì˜ˆ: 2023" />
                                                    </div>
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-org-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ë°œí–‰ ê¸°ê´€</Label>
                                                        <Input id={`award-org-${item.id || index}`} name="issuingOrganization" value={item.issuingOrganization || ''} onChange={(e) => handleAwardItemChange(index, e)} className={ADMIN_INPUT_STYLES.INPUT} placeholder="ì˜ˆ: êµ­ì œí‘œì¤€í™”ê¸°êµ¬" />
                                                    </div>
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-link-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ê´€ë ¨ ë§í¬ (ì„ íƒ)</Label>
                                                        <div className="flex items-center">
                                                            <Input id={`award-link-${item.id || index}`} name="link" type="url" value={item.link || ''} onChange={(e) => handleAwardItemChange(index, e)} className={cn(ADMIN_INPUT_STYLES.INPUT, 'rounded-r-none')} placeholder="https://example.com/award" />
                                                            <Button type="button" variant="outline" size="icon" className="rounded-l-none border-l-0 h-10 w-10 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed" disabled={!item.link || !item.link.startsWith('http')} onClick={() => item.link && window.open(item.link, '_blank')} title="ë§í¬ ì—´ê¸°">
                                                                <ExternalLink className="h-4 w-4" />
                                                            </Button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="md:col-span-1 space-y-4">
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-image-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ì´ë¯¸ì§€ íŒŒì¼</Label>
                                                        <FileUpload endpoint="companyAwardImage" onUploadSuccess={(file) => handleAwardImageUpload(index, file)} currentImageUrl={item.imageUrl} accept="image/jpeg, image/png, image/gif, image/webp" maxSizeMb={5} buttonText="ì´ë¯¸ì§€ ì„ íƒ ë˜ëŠ” ë³€ê²½" idSuffix={item.id || `award-image-${index}`} fileType="awards" />
                                                        <p className={cn(ADMIN_INPUT_STYLES.HELPER, "mt-1.5")}>
                                                            ê¶Œì¥: A4 ë¹„ìœ¨(ì„¸ë¡œ). ìµœëŒ€ 5MB. (JPG, PNG, GIF, WEBP)
                                                        </p>
                                                    </div>
                                                    <div className={ADMIN_INPUT_STYLES.WRAPPER}>
                                                        <Label htmlFor={`award-desc-${item.id || index}`} className={ADMIN_INPUT_STYLES.LABEL}>ì„¸ë¶€ ì„¤ëª… (ì„ íƒ)</Label>
                                                        <Textarea id={`award-desc-${item.id || index}`} name="description" value={item.description || ''} onChange={(e) => handleAwardItemChange(index, e)} className={ADMIN_INPUT_STYLES.INPUT} rows={4} placeholder="ì¸ì¦/ìˆ˜ìƒì— ëŒ€í•œ ê°„ëµí•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”." />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="text-center py-12 border-2 border-dashed border-gray-700 rounded-lg bg-gray-800/30">
                                    <Award className="mx-auto h-12 w-12 text-gray-500" />
                                    <h3 className="mt-3 text-lg font-semibold text-gray-300">ë“±ë¡ëœ ì¸ì¦/ìˆ˜ìƒ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</h3>
                                    <p className="mt-1.5 text-sm text-gray-400">
                                        'í•­ëª© ì¶”ê°€' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì¸ì¦/ìˆ˜ìƒ ì •ë³´ë¥¼ ë“±ë¡í•˜ì„¸ìš”.
                                    </p>
                                    <Button onClick={addAwardItem} size="sm" className={cn("mt-6", ADMIN_UI.BUTTON_PRIMARY)}>
                                        <PlusCircle className="w-4 h-4 mr-2" /> ì²« í•­ëª© ì¶”ê°€í•˜ê¸°
                                    </Button>
                                </div>
                            )}
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="contact">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-2 gap-6")}>
                                <div>
                                    <Label htmlFor="addressKo" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <MapPin className="mr-2 h-4 w-4" /> ì£¼ì†Œ (í•œê¸€)
                                    </Label>
                                    <Input id="addressKo" name="addressKo" value={data.addressKo} onChange={handleChange} placeholder="ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="addressEn" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Globe className="mr-2 h-4 w-4" /> ì£¼ì†Œ (ì˜ë¬¸)
                                    </Label>
                                    <Input id="addressEn" name="addressEn" value={data.addressEn || ''} onChange={handleChange} placeholder="Teheran-ro, Gangnam-gu, Seoul" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="phone" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Phone className="mr-2 h-4 w-4" /> ëŒ€í‘œ ì „í™”ë²ˆí˜¸
                                    </Label>
                                    <Input id="phone" name="phone" value={data.phone || ''} onChange={handleChange} placeholder="02-1234-5678" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="fax" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Phone className="mr-2 h-4 w-4 transform scale-x-[-1]" /> íŒ©ìŠ¤ë²ˆí˜¸
                                    </Label>
                                    <Input id="fax" name="fax" value={data.fax || ''} onChange={handleChange} placeholder="02-1234-5679" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="email" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Mail className="mr-2 h-4 w-4" /> ëŒ€í‘œ ì´ë©”ì¼
                                    </Label>
                                    <Input id="email" name="email" type="email" value={data.email || ''} onChange={handleChange} placeholder="contact@company.com" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="supportEmail" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Mail className="mr-2 h-4 w-4" /> ê³ ê°ì§€ì› ì´ë©”ì¼
                                    </Label>
                                    <Input id="supportEmail" name="supportEmail" type="email" value={data.supportEmail || ''} onChange={handleChange} placeholder="support@company.com" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="website" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <LinkIcon className="mr-2 h-4 w-4" /> ì›¹ì‚¬ì´íŠ¸ ì£¼ì†Œ
                                    </Label>
                                    <Input id="website" name="website" type="url" value={data.website || ''} onChange={handleChange} placeholder="https://www.company.com" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="details">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")}>
                                <div>
                                    <Label htmlFor="businessType_summary" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Info className="mr-2 h-4 w-4" /> ì£¼ìš” ì‚¬ì—… (ìš”ì•½)
                                    </Label>
                                    <Input id="businessType_summary" name="businessType" value={data.businessType || ''} onChange={handleChange} placeholder="ì†Œë°©ì•ˆì „ì¥ë¹„ ì œì¡° ë° íŒë§¤" className={ADMIN_INPUT_STYLES.INPUT} />
                                    <p className="text-xs text-gray-400 mt-1">ìƒì„¸ ë‚´ìš©ì€ 'ì£¼ìš”ì‚¬ì—…' íƒ­ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                                </div>
                                <div>
                                    <Label htmlFor="employees" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Users className="mr-2 h-4 w-4" /> ì„ì§ì› ìˆ˜
                                    </Label>
                                    <Input id="employees" name="employees" value={data.employees || ''} onChange={handleChange} placeholder="100ëª…" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="annualRevenue" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <TrendingUp className="mr-2 h-4 w-4" /> ì—°ë§¤ì¶œ
                                    </Label>
                                    <Input id="annualRevenue" name="annualRevenue" value={data.annualRevenue || ''} onChange={handleChange} placeholder="100ì–µì›" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="businessHours" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Clock className="mr-2 h-4 w-4" /> ì˜ì—…ì‹œê°„
                                    </Label>
                                    <Input id="businessHours" name="businessHours" value={data.businessHours || ''} onChange={handleChange} placeholder="í‰ì¼ 09:00 - 18:00" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                            </div>
                        </div>
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-3 gap-6")}>
                                <div>
                                    <Label htmlFor="history_summary" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Info className="mr-2 h-4 w-4" /> íšŒì‚¬ ì—°í˜ (ìš”ì•½)
                                    </Label>
                                    <Textarea id="history_summary" name="history" value={data.history || ''} onChange={handleChange} placeholder="2020ë…„: ...\n2021ë…„: ..." className={ADMIN_INPUT_STYLES.INPUT} rows={3} />
                                    <p className="text-xs text-gray-400 mt-1">ìƒì„¸ ë‚´ìš©ì€ 'ì£¼ìš”ì—°í˜' íƒ­ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                                </div>
                                <div>
                                    <Label htmlFor="vision_summary" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Info className="mr-2 h-4 w-4" /> íšŒì‚¬ ë¹„ì „ (ìš”ì•½)
                                    </Label>
                                    <Textarea id="vision_summary" name="vision" value={data.vision || ''} onChange={handleChange} placeholder="ê¸€ë¡œë²Œ ë¦¬ë”..." className={ADMIN_INPUT_STYLES.INPUT} rows={3} />
                                    <p className="text-xs text-gray-400 mt-1">ìƒì„¸ ë‚´ìš©ì€ 'ë¹„ì „' íƒ­ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                                </div>
                                <div>
                                    <Label htmlFor="awards_summary" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Info className="mr-2 h-4 w-4" /> ì£¼ìš” ìˆ˜ìƒ ë‚´ì—­ (ìš”ì•½)
                                    </Label>
                                    <Textarea id="awards_summary" name="awards" value={data.awards || ''} onChange={handleChange} placeholder="2022ë…„: ì¥ê´€ìƒ ..." className={ADMIN_INPUT_STYLES.INPUT} rows={3} />
                                    <p className="text-xs text-gray-400 mt-1">ìƒì„¸ ë‚´ìš©ì€ 'ì¸ì¦/ìˆ˜ìƒ' íƒ­ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="social">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-2 gap-6")}>
                                {(Object.keys(data.socialLinks || {}) as Array<keyof typeof defaultData.socialLinks>).map((key) => (
                                    <div key={key}>
                                        <Label htmlFor={key} className={cn(ADMIN_INPUT_STYLES.LABEL, 'capitalize flex items-center', ADMIN_UI.TEXT_SM)}>
                                            <LinkIcon className="mr-2 h-4 w-4" /> {key}
                                        </Label>
                                        <Input
                                            id={key}
                                            name={key}
                                            value={data.socialLinks?.[key] || ''}
                                            onChange={(e) => handleChange(e, 'socialLinks')}
                                            placeholder={`https://www.${key}.com/yourpage`}
                                            className={ADMIN_INPUT_STYLES.INPUT}
                                        />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="location">
                    <div className="space-y-6">
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={cn(ADMIN_CARD_STYLES.CONTENT, "grid grid-cols-1 md:grid-cols-2 gap-6")}>
                                <div>
                                    <Label htmlFor="latitude" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <MapPin className="mr-2 h-4 w-4" /> ìœ„ë„ (Latitude)
                                    </Label>
                                    <Input id="latitude" name="latitude" value={data.latitude || ''} onChange={handleChange} placeholder="37.503720" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div>
                                    <Label htmlFor="longitude" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <MapPin className="mr-2 h-4 w-4" /> ê²½ë„ (Longitude)
                                    </Label>
                                    <Input id="longitude" name="longitude" value={data.longitude || ''} onChange={handleChange} placeholder="127.044879" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                                <div className="md:col-span-2">
                                    <Label htmlFor="mapApiKey" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                        <Info className="mr-2 h-4 w-4" /> ì§€ë„ API í‚¤ (í•„ìš”í•œ ê²½ìš°)
                                    </Label>
                                    <Input id="mapApiKey" name="mapApiKey" value={data.mapApiKey || ''} onChange={handleChange} placeholder="Google Maps API Key or Kakao Maps API Key" className={ADMIN_INPUT_STYLES.INPUT} />
                                </div>
                            </div>
                        </div>
                        <div className={ADMIN_CARD_STYLES.DEFAULT}>
                            <div className={ADMIN_CARD_STYLES.CONTENT}>
                                <div className="space-y-3">
                                    <div>
                                        <Label htmlFor="directions" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                            <Info className="mr-2 h-4 w-4" /> ì˜¤ì‹œëŠ” ê¸¸ ì„¤ëª…
                                        </Label>
                                        <Textarea id="directions" name="directions" value={data.directions || ''} onChange={handleChange} placeholder="ì§€í•˜ì²  2í˜¸ì„  ê°•ë‚¨ì—­ 10ë²ˆ ì¶œêµ¬ì—ì„œ ë„ë³´ 5ë¶„" className={ADMIN_INPUT_STYLES.INPUT} rows={3} />
                                    </div>
                                    <div>
                                        <Label htmlFor="transportation" className={cn(ADMIN_INPUT_STYLES.LABEL, 'flex items-center', ADMIN_UI.TEXT_SM)}>
                                            <Info className="mr-2 h-4 w-4" /> ëŒ€ì¤‘êµí†µ ì •ë³´
                                        </Label>
                                        <Textarea id="transportation" name="transportation" value={data.transportation || ''} onChange={handleChange} placeholder="ë²„ìŠ¤: 140, 402, 407ë²ˆ\nì§€í•˜ì² : ì‹ ë¶„ë‹¹ì„  ê°•ë‚¨ì—­" className={ADMIN_INPUT_STYLES.INPUT} rows={3} />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </TabsContent>

                <TabsContent value="preview">
                    <div className={cn(ADMIN_CARD_STYLES.DEFAULT, "mt-6")}>
                        <div className={ADMIN_CARD_STYLES.HEADER}>
                            <h4 className={cn(ADMIN_HEADING_STYLES.CARD_TITLE, "flex items-center")}>
                                <ImageIcon className="w-5 h-5 mr-2 text-orange-400" /> íšŒì‚¬ ì •ë³´ ë¯¸ë¦¬ë³´ê¸°
                            </h4>
                        </div>
                        <div className={ADMIN_CARD_STYLES.CONTENT}>
                            <div className="p-4 md:p-6 border border-gray-700/40 rounded-lg bg-gray-900/50">
                                <div className="flex flex-col md:flex-row items-start md:items-center gap-4 pb-4 border-b border-gray-700/30">
                                    {data.logoUrl && (
                                        <img
                                            src={data.logoUrl}
                                            alt={data.nameKo || 'Company Logo'}
                                            className="h-12 object-contain bg-gray-700 p-1 rounded"
                                        />
                                    )}
                                    <div>
                                        <h1 className="text-xl font-bold text-orange-500">{data.nameKo}</h1>
                                        {data.nameEn && <p className="text-sm text-gray-300">{data.nameEn}</p>}
                                    </div>
                                </div>

                                {data.description && (
                                    <div className="py-4 border-b border-gray-700/30">
                                        <p className="text-gray-300 italic whitespace-pre-wrap">{data.description}</p>
                                    </div>
                                )}

                                <div className="py-4 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                                    <div>
                                        <h3 className="text-sm text-gray-400 mb-1">ì£¼ì†Œ</h3>
                                        <p className="text-gray-200">{data.addressKo || 'N/A'}</p>
                                    </div>
                                    <div>
                                        <h3 className="text-sm text-gray-400 mb-1">ì—°ë½ì²˜</h3>
                                        <p className="text-gray-200">ì „í™”: {data.phone || 'N/A'}</p>
                                        <p className="text-gray-200">ì´ë©”ì¼: {data.email || 'N/A'}</p>
                                        <p className="text-gray-200">íŒ©ìŠ¤: {data.fax || 'N/A'}</p>
                                    </div>
                                    <div>
                                        <h3 className="text-sm text-gray-400 mb-1">ê¸°ì—… ì •ë³´</h3>
                                        <p className="text-gray-200">ëŒ€í‘œì: {data.CEO || 'N/A'}</p>
                                        <p className="text-gray-200">ì‚¬ì—…ìë²ˆí˜¸: {data.businessNumber || 'N/A'}</p>
                                        <p className="text-gray-200">ì„¤ë¦½ì¼: {data.established ? format(new Date(data.established), 'yyyyë…„ Mì›” dì¼') : 'N/A'}</p>
                                    </div>
                                    <div>
                                        <h3 className="text-sm text-gray-400 mb-1">ì†Œì…œ ë¯¸ë””ì–´</h3>
                                        <div className="flex flex-wrap gap-x-3 gap-y-1 mt-1">
                                            {data.socialLinks?.facebook && <a href={data.socialLinks.facebook} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:underline">Facebook</a>}
                                            {data.socialLinks?.instagram && <a href={data.socialLinks.instagram} target="_blank" rel="noopener noreferrer" className="text-purple-400 hover:underline">Instagram</a>}
                                            {data.socialLinks?.youtube && <a href={data.socialLinks.youtube} target="_blank" rel="noopener noreferrer" className="text-red-400 hover:underline">YouTube</a>}
                                            {data.socialLinks?.linkedin && <a href={data.socialLinks.linkedin} target="_blank" rel="noopener noreferrer" className="text-blue-500 hover:underline">LinkedIn</a>}
                                            {data.socialLinks?.blog && <a href={data.socialLinks.blog} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:underline">Blog</a>}
                                        </div>
                                    </div>
                                </div>

                                {(data.vision || data.philosophyStatement || (data.coreValues && data.coreValues.length > 0) || data.businessType || data.history || (data.awardsAndCertifications && data.awardsAndCertifications.length > 0)) && (
                                    <div className="border-t border-gray-700/30 pt-4 mt-2 space-y-4">
                                        {data.vision && (
                                            <div>
                                                <h3 className="text-sm text-gray-400 mb-1">ë¹„ì „</h3>
                                                <p className="text-gray-300 whitespace-pre-wrap">{data.vision}</p>
                                            </div>
                                        )}
                                        {data.philosophyStatement && (
                                            <div>
                                                <h3 className="text-sm text-gray-400 mb-1">ê²½ì˜ì² í•™</h3>
                                                <p className="text-gray-300 whitespace-pre-wrap">{data.philosophyStatement}</p>
                                            </div>
                                        )}
                                        {data.coreValues && data.coreValues.length > 0 && (
                                            <div>
                                                <h3 className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2")}>í•µì‹¬ê°€ì¹˜</h3> {/* ADMIN_INPUT_STYLES.LABEL ì‚¬ìš© */}
                                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                                    {data.coreValues.slice(0, 4).map(cv => {
                                                        const IconLookup = cv.icon && LucideIcons[cv.icon];
                                                        const IconComponent: React.FC<LucideProps> = IconLookup ? IconLookup : Sparkles; // Ensure type
                                                        return (
                                                            <div key={cv.id} className="bg-gray-700/50 p-3 rounded-md border border-gray-600/50">
                                                                <div className="flex items-center mb-1.5">
                                                                    <IconComponent className="w-5 h-5 mr-2 text-orange-400 flex-shrink-0" />
                                                                    <h5 className="text-sm font-semibold text-gray-100 truncate" title={cv.mainTitle}>{cv.mainTitle}</h5>
                                                                </div>
                                                                {cv.subTitle && <p className="text-xs text-gray-400 mb-1 -mt-1 ml-7 truncate" title={cv.subTitle}>{cv.subTitle}</p>}
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        )}
                                        {data.businessType && (
                                            <div>
                                                <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì£¼ìš”ì‚¬ì—…</h3> {/* ADMIN_INPUT_STYLES.LABEL ì‚¬ìš© */}
                                                <p className="text-gray-300 whitespace-pre-wrap line-clamp-3">{data.businessType}</p>
                                            </div>
                                        )}
                                        {data.history && (
                                            <div>
                                                <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì—°í˜</h3> {/* ADMIN_INPUT_STYLES.LABEL ì‚¬ìš© */}
                                                <p className="text-gray-300 whitespace-pre-line line-clamp-3">{data.history}</p>
                                            </div>
                                        )}
                                        {data.awardsAndCertifications && data.awardsAndCertifications.length > 0 && (
                                            <div>
                                                <h3 className={cn(ADMIN_INPUT_STYLES.LABEL, "flex items-center mb-1")}> {/* ADMIN_INPUT_STYLES.LABEL ì‚¬ìš© */}
                                                    <Award className="w-4 h-4 mr-2 text-orange-400" /> ì£¼ìš” ì¸ì¦ ë° ìˆ˜ìƒ
                                                </h3>
                                                <div className="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2">
                                                    {data.awardsAndCertifications.slice(0, 6).map(award => (
                                                        <div key={award.id || award.title} className="bg-gray-700/50 p-2 rounded-md text-center border border-gray-600/50">
                                                            {award.imageUrl && (
                                                                <div className="relative w-full aspect-[210/297] mb-1.5 rounded overflow-hidden bg-gray-600/50">
                                                                    <Image
                                                                        src={award.imageUrl.startsWith('/') ? `${process.env.NEXT_PUBLIC_BASE_PATH || ''}${award.imageUrl}` : award.imageUrl}
                                                                        alt={award.title || 'Award Image'}
                                                                        fill
                                                                        className="object-contain p-0.5"
                                                                        unoptimized={award.imageUrl.startsWith('http')}
                                                                        onError={(e) => { (e.target as HTMLImageElement).src = `${process.env.NEXT_PUBLIC_BASE_PATH || ''}/images/placeholder-a4.png`; }}
                                                                    />
                                                                </div>
                                                            )}
                                                            <h5 className="text-[11px] font-semibold text-orange-300 truncate leading-tight" title={award.title}>{award.title}</h5>
                                                            {award.year && <p className="text-[10px] text-gray-400">{award.year}</p>}
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </TabsContent>
            </Tabs >

    <Dialog open={previewOpen} onOpenChange={setPreviewOpen}>
        <DialogContent className={cn(ADMIN_CARD_STYLES.DEFAULT, "max-w-3xl w-full bg-gray-800 text-gray-100")}>
            <DialogHeader>
                <DialogTitle className={cn(ADMIN_UI.TEXT_PRIMARY, ADMIN_HEADING_STYLES.SECTION_TITLE)}>
                    íšŒì‚¬ ì •ë³´ ë¯¸ë¦¬ë³´ê¸°
                </DialogTitle>
            </DialogHeader>
            <div className="mt-4 space-y-4 max-h-[80vh] overflow-y-auto p-1">
                <div className="p-4 md:p-6 border border-gray-700/40 rounded-lg bg-gray-900/50">
                    <div className="flex flex-col md:flex-row items-start md:items-center gap-4 pb-4 border-b border-gray-700/30">
                        {data.logoUrl && (
                            <img
                                src={data.logoUrl}
                                alt={data.nameKo || 'Company Logo'}
                                className="h-12 object-contain bg-gray-700 p-1 rounded"
                            />
                        )}
                        <div>
                            <h1 className="text-xl font-bold text-orange-500">{data.nameKo}</h1>
                            {data.nameEn && <p className="text-sm text-gray-300">{data.nameEn}</p>}
                        </div>
                    </div>

                    {data.description && (
                        <div className="py-4 border-b border-gray-700/30">
                            <p className="text-gray-300 italic whitespace-pre-wrap">{data.description}</p>
                        </div>
                    )}

                    <div className="py-4 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                        <div>
                            <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì£¼ì†Œ</h3>
                            <p className="text-gray-200">{data.addressKo || 'N/A'}</p>
                        </div>
                        <div>
                            <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì—°ë½ì²˜</h3>
                            <p className="text-gray-200">ì „í™”: {data.phone || 'N/A'}</p>
                            <p className="text-gray-200">ì´ë©”ì¼: {data.email || 'N/A'}</p>
                            <p className="text-gray-200">íŒ©ìŠ¤: {data.fax || 'N/A'}</p>
                        </div>
                        <div>
                            <h3 className={ADMIN_INPUT_STYLES.LABEL}>ê¸°ì—… ì •ë³´</h3>
                            <p className="text-gray-200">ëŒ€í‘œì: {data.CEO || 'N/A'}</p>
                            <p className="text-gray-200">ì‚¬ì—…ìë²ˆí˜¸: {data.businessNumber || 'N/A'}</p>
                            <p className="text-gray-200">ì„¤ë¦½ì¼: {data.established ? format(new Date(data.established), 'yyyyë…„ Mì›” dì¼') : 'N/A'}</p>
                        </div>
                        <div>
                            <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì†Œì…œ ë¯¸ë””ì–´</h3>
                            <div className="flex flex-wrap gap-x-3 gap-y-1 mt-1">
                                {data.socialLinks?.facebook && <a href={data.socialLinks.facebook} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:underline">Facebook</a>}
                                {data.socialLinks?.instagram && <a href={data.socialLinks.instagram} target="_blank" rel="noopener noreferrer" className="text-purple-400 hover:underline">Instagram</a>}
                                {data.socialLinks?.youtube && <a href={data.socialLinks.youtube} target="_blank" rel="noopener noreferrer" className="text-red-400 hover:underline">YouTube</a>}
                                {data.socialLinks?.linkedin && <a href={data.socialLinks.linkedin} target="_blank" rel="noopener noreferrer" className="text-blue-500 hover:underline">LinkedIn</a>}
                                {data.socialLinks?.blog && <a href={data.socialLinks.blog} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:underline">Blog</a>}
                            </div>
                        </div>
                    </div>

                    {(data.vision || data.philosophyStatement || (data.coreValues && data.coreValues.length > 0) || data.businessType || data.history || (data.awardsAndCertifications && data.awardsAndCertifications.length > 0)) && (
                        <div className="border-t border-gray-700/30 pt-4 mt-2 space-y-4">
                            {data.vision && (
                                <div>
                                    <h3 className={ADMIN_INPUT_STYLES.LABEL}>ë¹„ì „</h3>
                                    <p className="text-gray-300 whitespace-pre-wrap">{data.vision}</p>
                                </div>
                            )}
                            {data.philosophyStatement && (
                                <div>
                                    <h3 className={ADMIN_INPUT_STYLES.LABEL}>ê²½ì˜ì² í•™</h3>
                                    <p className="text-gray-300 whitespace-pre-wrap">{data.philosophyStatement}</p>
                                </div>
                            )}
                            {data.coreValues && data.coreValues.length > 0 && (
                                <div>
                                    <h3 className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2")}>í•µì‹¬ê°€ì¹˜</h3>
                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                        {data.coreValues.slice(0, 4).map(cv => {
                                            const IconLookup = cv.icon && LucideIcons[cv.icon];
                                            const IconComponent: React.FC<LucideProps> = IconLookup ? IconLookup : Sparkles; // Ensure type
                                            return (
                                                <div key={cv.id} className="bg-gray-700/50 p-3 rounded-md border border-gray-600/50">
                                                    <div className="flex items-center mb-1.5">
                                                        <IconComponent className="w-5 h-5 mr-2 text-orange-400 flex-shrink-0" />
                                                        <h5 className="text-sm font-semibold text-gray-100 truncate" title={cv.mainTitle}>{cv.mainTitle}</h5>
                                                    </div>
                                                    {cv.subTitle && <p className="text-xs text-gray-400 mb-1 -mt-1 ml-7 truncate" title={cv.subTitle}>{cv.subTitle}</p>}
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}
                            {data.businessType && (
                                <div>
                                    <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì£¼ìš”ì‚¬ì—…</h3>
                                    <p className="text-gray-300 whitespace-pre-wrap line-clamp-3">{data.businessType}</p>
                                </div>
                            )}
                            {data.history && (
                                <div>
                                    <h3 className={ADMIN_INPUT_STYLES.LABEL}>ì—°í˜</h3>
                                    <p className="text-gray-300 whitespace-pre-line line-clamp-3">{data.history}</p>
                                </div>
                            )}
                            {data.awardsAndCertifications && data.awardsAndCertifications.length > 0 && (
                                <div>
                                    <h3 className={cn(ADMIN_INPUT_STYLES.LABEL, "flex items-center mb-1")}>
                                        <Award className="w-4 h-4 mr-2 text-orange-400" /> ì£¼ìš” ì¸ì¦ ë° ìˆ˜ìƒ
                                    </h3>
                                    <div className="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2">
                                        {data.awardsAndCertifications.slice(0, 6).map(award => (
                                            <div key={award.id || award.title} className="bg-gray-700/50 p-2 rounded-md text-center border border-gray-600/50">
                                                {award.imageUrl && (
                                                    <div className="relative w-full aspect-[210/297] mb-1.5 rounded overflow-hidden bg-gray-600/50">
                                                        <Image
                                                            src={award.imageUrl.startsWith('/') ? `${process.env.NEXT_PUBLIC_BASE_PATH || ''}${award.imageUrl}` : award.imageUrl}
                                                            alt={award.title || 'Award Image'}
                                                            fill
                                                            className="object-contain p-0.5"
                                                            unoptimized={award.imageUrl.startsWith('http')}
                                                            onError={(e) => { (e.target as HTMLImageElement).src = `${process.env.NEXT_PUBLIC_BASE_PATH || ''}/images/placeholder-a4.png`; }}
                                                        />
                                                    </div>
                                                )}
                                                <h5 className="text-[11px] font-semibold text-orange-300 truncate leading-tight" title={award.title}>{award.title}</h5>
                                                {award.year && <p className="text-[10px] text-gray-400">{award.year}</p>}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            </div>
        </DialogContent>
    </Dialog>

{/* ì—°í˜ ìŠ¤íƒ€ì¼ ì„¤ì • ë‹¤ì´ì–¼ë¡œê·¸ */ }
<Dialog open={historyStyleDialogOpen} onOpenChange={setHistoryStyleDialogOpen}>
    <DialogContent className={cn(ADMIN_CARD_STYLES.DEFAULT, "max-w-4xl w-full bg-gray-800 text-gray-100")}>
        <DialogHeader>
            <DialogTitle className={cn(ADMIN_UI.TEXT_PRIMARY, ADMIN_HEADING_STYLES.SECTION_TITLE, "flex items-center")}>
                <Palette className="mr-2 h-5 w-5" />
                ì—°í˜ íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼ ì„¤ì •
            </DialogTitle>
        </DialogHeader>
        <div className="mt-4 space-y-6 max-h-[80vh] overflow-y-auto">
            {/* ìŠ¤íƒ€ì¼ ì„¤ì • ì˜µì…˜ */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="space-y-4">
                    <div>
                        <Label className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2 block")}>ìƒ‰ìƒ ìŠ¤í‚¤ë§ˆ</Label>
                        <Select
                            value={historyCustomStyles.colorScheme}
                            onValueChange={(value) => setHistoryCustomStyles(prev => ({ ...prev, colorScheme: value }))}
                        >
                            <SelectTrigger className={ADMIN_INPUT_STYLES.INPUT}>
                                <SelectValue />
                            </SelectTrigger>
                            <SelectContent>
                                <SelectItem value="default">ê¸°ë³¸ (ë‹¤ì±„ë¡œìš´)</SelectItem>
                                <SelectItem value="blue">íŒŒë€ìƒ‰ ê³„ì—´</SelectItem>
                                <SelectItem value="green">ì´ˆë¡ìƒ‰ ê³„ì—´</SelectItem>
                                <SelectItem value="purple">ë³´ë¼ìƒ‰ ê³„ì—´</SelectItem>
                                <SelectItem value="orange">ì£¼í™©ìƒ‰ ê³„ì—´</SelectItem>
                            </SelectContent>
                        </Select>
                    </div>

                    <div>
                        <Label className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2 block")}>íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼</Label>
                        <Select
                            value={historyCustomStyles.timelineStyle}
                            onValueChange={(value) => setHistoryCustomStyles(prev => ({ ...prev, timelineStyle: value }))}
                        >
                            <SelectTrigger className={ADMIN_INPUT_STYLES.INPUT}>
                                <SelectValue />
                            </SelectTrigger>
                            <SelectContent>
                                <SelectItem value="modern">ëª¨ë˜ (ê¸°ë³¸)</SelectItem>
                                <SelectItem value="classic">í´ë˜ì‹</SelectItem>
                                <SelectItem value="minimal">ë¯¸ë‹ˆë©€</SelectItem>
                            </SelectContent>
                        </Select>
                    </div>

                    <div className="space-y-3">
                        <div className="flex items-center justify-between">
                            <Label className={ADMIN_INPUT_STYLES.LABEL}>ì•„ì´ì½˜ í‘œì‹œ</Label>
                            <Switch
                                checked={historyCustomStyles.showIcons}
                                onCheckedChange={(checked) => setHistoryCustomStyles(prev => ({ ...prev, showIcons: checked }))}
                            />
                        </div>
                        <div className="flex items-center justify-between">
                            <Label className={ADMIN_INPUT_STYLES.LABEL}>ë‚ ì§œ í‘œì‹œ</Label>
                            <Switch
                                checked={historyCustomStyles.showDates}
                                onCheckedChange={(checked) => setHistoryCustomStyles(prev => ({ ...prev, showDates: checked }))}
                            />
                        </div>
                        <div className="flex items-center justify-between">
                            <Label className={ADMIN_INPUT_STYLES.LABEL}>ì»´íŒ©íŠ¸ ëª¨ë“œ</Label>
                            <Switch
                                checked={historyCustomStyles.compactMode}
                                onCheckedChange={(checked) => setHistoryCustomStyles(prev => ({ ...prev, compactMode: checked }))}
                            />
                        </div>
                    </div>
                </div>

                {/* ë¯¸ë¦¬ë³´ê¸° */}
                <div>
                    <Label className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2 block")}>ë¯¸ë¦¬ë³´ê¸°</Label>
                    <div className="border border-gray-700 rounded-lg p-4 bg-gray-900/50 max-h-80 overflow-y-auto">
                        {data.history ? (
                            <HistoryTimeline
                                historyText={data.history}
                                customStyles={historyCustomStyles}
                            />
                        ) : (
                            <div className="text-center py-8 text-gray-400">
                                <ScrollText className="mx-auto h-8 w-8 mb-2" />
                                <p className="text-sm">ì—°í˜ ë°ì´í„°ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                            </div>
                        )}
                    </div>
                </div>
            </div>

            {/* HTML/CSS ë³µì‚¬ ì„¹ì…˜ */}
            {data.history && (
                <div className="space-y-4">
                    <Separator className="bg-gray-700" />
                    <div>
                        <Label className={cn(ADMIN_INPUT_STYLES.LABEL, "mb-2 block flex items-center")}>
                            <ExternalLink className="mr-2 h-4 w-4" />
                            ìƒì„±ëœ HTML/CSS ì½”ë“œ
                        </Label>
                        <div className="space-y-2">
                            <div className="flex gap-2">
                                <Button
                                    onClick={() => copyHistoryHTML()}
                                    variant="outline"
                                    size="sm"
                                    className="text-green-400 border-green-400 hover:bg-green-400/10"
                                >
                                    <Save className="mr-1 h-4 w-4" />
                                    HTML ë³µì‚¬
                                </Button>
                                <Button
                                    onClick={() => copyHistoryCSS()}
                                    variant="outline"
                                    size="sm"
                                    className="text-blue-400 border-blue-400 hover:bg-blue-400/10"
                                >
                                    <Palette className="mr-1 h-4 w-4" />
                                    CSS ë³µì‚¬
                                </Button>
                                <Button
                                    onClick={() => downloadHistoryCode()}
                                    variant="outline"
                                    size="sm"
                                    className="text-purple-400 border-purple-400 hover:bg-purple-400/10"
                                >
                                    <Download className="mr-1 h-4 w-4" />
                                    íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                                </Button>
                            </div>
                            <p className="text-xs text-gray-400">
                                ìƒì„±ëœ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ë‚˜ ë¬¸ì„œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                </div>
            )}

            <div className="flex justify-end gap-2 pt-4 border-t border-gray-700">
                <Button
                    onClick={() => setHistoryStyleDialogOpen(false)}
                    variant="outline"
                    className={ADMIN_UI.BUTTON_OUTLINE}
                >
                    ë‹«ê¸°
                </Button>
                <Button
                    onClick={() => {
                        toast.success('ìŠ¤íƒ€ì¼ ì„¤ì •ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        setHistoryStyleDialogOpen(false);
                    }}
                    className={ADMIN_UI.BUTTON_PRIMARY}
                >
                    ì ìš©
                </Button>
            </div>
        </div>
    </DialogContent>
</Dialog>
        </div >
    );
};

export default AdminCompanyPage; 